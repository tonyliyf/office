/*!
* =====================================================
*Fui v1.0.1
* =====================================================
*/
(function(a,g){Date.prototype.DateAdd=function(j,i){var h=this;switch(j){case"s":return new Date(Date.parse(h)+(1000*i));case"n":return new Date(Date.parse(h)+(60000*i));case"h":return new Date(Date.parse(h)+(3600000*i));case"d":return new Date(Date.parse(h)+(86400000*i));case"w":return new Date(Date.parse(h)+((86400000*7)*i));case"q":return new Date(h.getFullYear(),(h.getMonth())+i*3,h.getDate(),h.getHours(),h.getMinutes(),h.getSeconds());case"m":return new Date(h.getFullYear(),(h.getMonth())+i,h.getDate(),h.getHours(),h.getMinutes(),h.getSeconds());case"y":return new Date((h.getFullYear()+i),h.getMonth(),h.getDate(),h.getHours(),h.getMinutes(),h.getSeconds())}};Date.prototype.DateDiff=function(j,h){var i=this;if(typeof h=="string"){h=fui.date.parse(h)}switch(j){case"s":return parseInt((h-i)/1000);case"n":return parseInt((h-i)/60000);case"h":return parseInt((h-i)/3600000);case"d":return parseInt((h-i)/86400000);case"w":return parseInt((h-i)/(86400000*7));case"m":return(h.getMonth()+1)+((h.getFullYear()-i.getFullYear())*12)-(i.getMonth()+1);case"y":return h.getFullYear()-i.getFullYear()}};Date.prototype.MaxDayOfDate=function(){var k=this;var h=k.toArray();var i=(new Date(h[0],h[1]+1,1));var j=i.DateAdd("m",1);var l=dateDiff(i.Format("yyyy-MM-dd"),j.Format("yyyy-MM-dd"));return l};Date.prototype.isLeapYear=function(){return(0==this.getYear()%4&&((this.getYear()%100!=0)||(this.getYear()%400==0)))};var d;var c;a("body").on("tap",function(h){var j=g.fui.now();var i=h.target||h.srcElement;if(d&&d===i){if(c&&(j-c)<300){var k={center:{x:h.pageX,y:h.pageY}};g.fui.trigger(i,"doubletap",k)}}c=g.fui.now();d=i;return false});var f=/matrix(3d)?\((.+?)\)/;var b={};a.each(["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"],function(h,j){b["[object "+j+"]"]=j.toLowerCase()});var e=a.mobile.support.touch;g.fui=g.fui||{};g.fui={event:{supportTouch:e,start:e?"touchstart":"mousedown",end:e?"touchend":"mouseup",move:e?"touchmove":"mousemove",cancel:"touchcancel"},options:{gestureConfig:{tap:true,doubletap:false,longtap:false,hold:false,flick:true,swipe:true,drag:true,pinch:false}},now:Date.now||function(){return +new Date()},slice:[].slice,pageid:function(){if(!fui.nav){return"no"}var h=fui.nav.page.data[fui.nav.page.activeid]||{};return(h.op||{}).pageid||"no"},guid:function(l){l=l||"_";var h="";for(var j=1;j<=32;j++){var k=Math.floor(Math.random()*16).toString(16);h+=k;if((j==8)||(j==12)||(j==16)||(j==20)){h+=l}}return h},date:{isLeapYear:function(h){return(h%4==0&&h%100!=0)||(h%400==0)},parse:function(i){var h=i;if(typeof i==="string"){if(i.indexOf("/Date(")>-1){h=new Date(parseInt(i.replace("/Date(","").replace(")/",""),10))}else{h=new Date(Date.parse(i.replace(/-/g,"/").replace("T"," ").split(".")[0]))}}return h},format:function(m,i){if(!m){return""}var h=g.fui.date.parse(m);var l={"M+":h.getMonth()+1,"d+":h.getDate(),"h+":h.getHours(),"m+":h.getMinutes(),"s+":h.getSeconds(),"q+":Math.floor((h.getMonth()+3)/3),S:h.getMilliseconds()};if(/(y+)/.test(i)){i=i.replace(RegExp.$1,(h.getFullYear()+"").substr(4-RegExp.$1.length))}for(var j in l){if(new RegExp("("+j+")").test(i)){i=i.replace(RegExp.$1,RegExp.$1.length==1?l[j]:("00"+l[j]).substr((""+l[j]).length))}}return i},get:function(h,l,j){var i=new Date();if(!!l){i=i.DateAdd(l,j)}var k=g.fui.date.format(i,h);return k}},isArray:Array.isArray||function(h){return h instanceof Array},later:function(l,p,h,j){p=p||0;var n=l;var i=j;var k;var o;if(typeof l==="string"){n=h[l]}k=function(){n.apply(h,fui.isArray(i)?i:[i])};o=setTimeout(k,p);return{id:o,cancel:function(){clearTimeout(o)}}},createMask:function(){if(a(".f-backdrop").length==0){var h='<div class="f-backdrop" ></div>';a("body").append(h);a(".f-backdrop").on("tap",function(){a(this).fadeOut();a(".f-pop.active").removeClass("active");return false})}},showMask:function(){a(".f-backdrop").fadeIn()},hideMask:function(){a(".f-backdrop").fadeOut()},getStyles:function(h,i){var j=h.ownerDocument.defaultView.getComputedStyle(h,null);if(i){return j.getPropertyValue(i)||j[i]}return j},parseTranslateMatrix:function(l,j){var i=l.match(f);var h=i&&i[1];if(i){i=i[2].split(",");if(h==="3d"){i=i.slice(12,15)}else{i.push(0);i=i.slice(4,7)}}else{i=[0,0,0]}var k={x:parseFloat(i[0]),y:parseFloat(i[1]),z:parseFloat(i[2])};if(j&&k.hasOwnProperty(j)){return k[j]}return k},type:function(h){return h==null?String(h):b[{}.toString.call(h)]||"object"},isFunction:function(h){return fui.type(h)==="function"},trigger:function(h,j,i){if(h){h.dispatchEvent(new CustomEvent(j,{detail:i,bubbles:true,cancelable:true}))}return this},hooks:{},addAction:function(j,h){var i=fui.hooks[j];if(!i){i=[]}h.index=h.index||1000;i.push(h);i.sort(function(k,l){return k.index-l.index});fui.hooks[j]=i;return fui.hooks[j]},doAction:function(i,h){if(fui.isFunction(h)){a.each(fui.hooks[i],h)}else{a.each(fui.hooks[i],function(k,j){return !j.handle()})}},offset:function(i){var h={top:0,left:0};if(typeof i.getBoundingClientRect!==undefined){h=i.getBoundingClientRect()}return{top:h.top+g.pageYOffset-i.clientTop,left:h.left+g.pageXOffset-i.clientLeft}},includeJs:function(j){var h=document.getElementsByTagName("HEAD").item(0);var i=document.createElement("script");i.language="javascript";i.type="text/javascript";i.text=j;h.appendChild(i)},includeCss:function(j){var i=document.getElementsByTagName("head").item(0);var k=document.createElement("style");k.type="text/css";try{k.appendChild(document.createTextNode(j))}catch(h){k.style.cssText=j}i.appendChild(k)},preventDefault:function(h){if(h.cancelable){if(!h.defaultPrevented){h.preventDefault()}}},data:{}}})(window.jQuery,this);(function(c){var d=false,b=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;var a=function(){};a.extend=function(h){var e=this.prototype;d=true;var i=new this();d=false;for(var g in h){i[g]=typeof h[g]=="function"&&typeof e[g]=="function"&&b.test(h[g])?(function(k,j){return function(){var m=this._super;this._super=e[k];var l=j.apply(this,arguments);this._super=m;return l}})(g,h[g]):h[g]}function f(){if(!d&&this.init){this.init.apply(this,arguments)}}f.prototype=i;f.prototype.constructor=f;f.extend=arguments.callee;return f};c.Class=a})(window.fui);(function(b){if(!b.requestAnimationFrame){var a=0;b.requestAnimationFrame=b.webkitRequestAnimationFrame||function(c,e){var d=new Date().getTime();var g=Math.max(0,16.7-(d-a));var f=b.setTimeout(function(){c(d+g)},g);a=d+g;return f};b.cancelAnimationFrame=b.webkitCancelAnimationFrame||b.webkitCancelRequestAnimationFrame||function(c){clearTimeout(c)}}}(window));(function(a,b){b.validator={validReg:function(d,e,c){var f={code:true,msg:""};if(!e.test(d)){f.code=false;f.msg=c}return f},validRegOrNull:function(d,e,c){var f={code:true,msg:""};if(d==null||d==undefined||d.length==0){return f}if(!e.test(d)){f.code=false;f.msg=c}return f},isNotNull:function(c){var d={code:true,msg:""};c=a.trim(c);if(c==null||c==undefined||c.length==0){d.code=false;d.msg="不能为空"}return d},isNum:function(c){return b.validator.validReg(c,/^[-+]?\d+$/,"必须为数字")},isNumOrNull:function(c){return b.validator.validRegOrNull(c,/^[-+]?\d+$/,"数字或空")},isEmail:function(c){return b.validator.validReg(c,/^\w{3,}@\w+(\.\w+)+$/,"必须为E-mail格式")},isEmailOrNull:function(c){return b.validator.validRegOrNull(c,/^\w{3,}@\w+(\.\w+)+$/,"必须为E-mail格式或空")},isEnglishStr:function(c){return b.validator.validReg(c,/^[a-z,A-Z]+$/,"必须为英文字符串")},isEnglishStrOrNull:function(c){return b.validator.validRegOrNull(c,/^[a-z,A-Z]+$/,"必须为英文字符串或空")},isTelephone:function(c){return b.validator.validReg(c,/^(\d{3,4}\-)?[1-9]\d{6,7}$/,"必须为电话格式")},isTelephoneOrNull:function(c){return b.validator.validRegOrNull(c,/^(\d{3,4}\-)?[1-9]\d{6,7}$/,"必须为电话格式或空")},isMobile:function(c){return b.validator.validReg(c,/^(\+\d{2,3}\-)?\d{11}$/,"必须为手机格式")},isMobileOrnull:function(c){return b.validator.validRegOrNull(c,/^(\+\d{2,3}\-)?\d{11}$/,"必须为手机格式或空")},isMobileOrPhone:function(c){var d={code:true,msg:""};if(!b.validator.isTelephone(c).code&&!b.validator.isMobile(c).code){d.code=false;d.msg="为电话格式或手机格式"}return d},isMobileOrPhoneOrNull:function(c){var d={code:true,msg:""};if(b.validator.isNotNull(c).code&&!b.validator.isTelephone(c).code&&!b.validator.isMobile(c).code){d.code=false;d.msg="为电话格式或手机格式或空"}return d},isUri:function(c){return b.validator.validReg(c,/^http:\/\/[a-zA-Z0-9]+\.[a-zA-Z0-9]+[\/=\?%\-&_~`@[\]\':+!]*([^<>\"\"])*$/,"必须为网址格式")},isUriOrNull:function(c){return b.validator.validRegOrNull(c,/^http:\/\/[a-zA-Z0-9]+\.[a-zA-Z0-9]+[\/=\?%\-&_~`@[\]\':+!]*([^<>\"\"])*$/,"必须为网址格式或空")},isDate:function(c){return b.validator.validReg(c,/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/,"必须为日期格式")},isDateOrNull:function(c){return b.validator.validRegOrNull(c,/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/,"必须为日期格式或空")},isDateTime:function(c){return b.validator.validReg(c,/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/,"必须为日期时间格式")},isDateTimeOrNull:function(c){return b.validator.validRegOrNull(c,/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/,"必须为日期时间格式")},isTime:function(c){return b.validator.validReg(c,/^((20|21|22|23|[0-1]\d)\:[0-5][0-9])(\:[0-5][0-9])?$/,"必须为时间格式")},isTimeOrNull:function(c){return b.validator.validRegOrNull(c,/^((20|21|22|23|[0-1]\d)\:[0-5][0-9])(\:[0-5][0-9])?$/,"必须为时间格式或空")},isChinese:function(c){return b.validator.validReg(c,/^[\u0391-\uFFE5]+$/,"必须为中文")},isChineseOrNull:function(c){return b.validator.validRegOrNull(c,/^[\u0391-\uFFE5]+$/,"必须为中文或空")},isZip:function(c){return b.validator.validReg(c,/^\d{6}$/,"必须为邮编格式")},isZipOrNull:function(c){return b.validator.validRegOrNull(c,/^\d{6}$/,"必须为邮编格式或空")},isDouble:function(c){return b.validator.validReg(c,/^[-\+]?\d+(\.\d+)?$/,"必须为小数")},isDoubleOrNull:function(c){return b.validator.validRegOrNull(c,/^[-\+]?\d+(\.\d+)?$/,"必须为小数或空")},isIDCard:function(c){return b.validator.validReg(c,/^\d{15}(\d{2}[A-Za-z0-9;])?$/,"必须为身份证格式")},isIDCardOrNull:function(c){return b.validator.validRegOrNull(c,/^\d{15}(\d{2}[A-Za-z0-9;])?$/,"必须为身份证格式或空")},isIP:function(d){var f={code:true,msg:""};var e=/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/g;var c=false;if(e.test(d)){if(RegExp.$1<256&&RegExp.$2<256&&RegExp.$3<256&&RegExp.$4<256){c=true}}if(!c){f.code=false;f.msg="必须为IP格式"}return f},isIPOrNull:function(c){var d={code:true,msg:""};if(b.validator.isNotNull(c)&&!b.validator.isIP(c).code){d.code=false;d.msg="必须为IP格式或空"}return d},isLenNum:function(d,c){var f={code:true,msg:""};var e=/^[0-9]+$/;d=a.trim(d);if(d.length>c||!e.test(d)){f.code=false;f.msg="必须为"+c+"位数字"}return f},isLenNumOrNull:function(d,c){var e={code:true,msg:""};if(b.validator.isNotNull(d).code&&!b.validator.isLenNum(d)){e.code=false;e.msg="必须为"+c+"位数字或空"}return e},isLenStr:function(d,c){var e={code:true,msg:""};d=a.trim(d);if(!b.validator.isNotNull(d).code||d.length>c){e.code=false;e.msg="必须小于等于"+c+"位字符"}return e},isLenStrOrNull:function(d,c){var e={code:true,msg:""};d=a.trim(d);if(b.validator.isNotNull(d).code&&d.length>c){e.code=false;e.msg="必须小于等于"+c+"位字符或空"}return e}}})(window.jQuery,window.fui);(function(l,C){l.gestures={session:{}};l.stopPropagation=function(D){D.stopPropagation()};l.addGesture=function(D){return l.addAction("gestures",D)};var x=Math.round;var a=Math.abs;var z=Math.sqrt;var b=Math.atan;var c=Math.atan2;var o=function(D,E,F){if(!F){F=["x","y"]}var G=E[F[0]]-D[F[0]];var H=E[F[1]]-D[F[1]];return z((G*G)+(H*H))};var r=function(F,D){if(F.length>=2&&D.length>=2){var E=["pageX","pageY"];return o(D[1],D[0],E)/o(F[1],F[0],E)}return 1};var m=function(D,E,F){if(!F){F=["x","y"]}var G=E[F[0]]-D[F[0]];var H=E[F[1]]-D[F[1]];return c(H,G)*180/Math.PI};var n=function(D,E){if(D===E){return""}if(a(D)>=a(E)){return D>0?"left":"right"}return E>0?"up":"down"};var q=function(F,D){var E=["pageX","pageY"];return m(D[1],D[0],E)-m(F[1],F[0],E)};var t=function(D,E,F){return{x:E/D||0,y:F/D||0}};var k=function(D,E){if(l.gestures.stoped){return}l.doAction("gestures",function(G,F){if(!l.gestures.stoped){if(l.options.gestureConfig[F.name]!==false){F.handle(D,E)}}})};var v=function(D,E){while(D){if(D==E){return true}D=D.parentNode}return false};var B=function(I,E,G){var F=[];var K=[];var D=0;while(D<I.length){var J=E?I[D][E]:I[D];if(K.indexOf(J)<0){F.push(I[D])}K[D]=J;D++}if(G){if(!E){F=F.sort()}else{F=F.sort(function H(L,M){return L[E]>M[E]})}}return F};var p=function(E){var F=E.length;if(F===1){return{x:x(E[0].pageX),y:x(E[0].pageY)}}var G=0;var H=0;var D=0;while(D<F){G+=E[D].pageX;H+=E[D].pageY;D++}return{x:x(G/F),y:x(H/F)}};var w=function(){return l.options.gestureConfig.pinch};var j=function(E){var F=[];var D=0;while(D<E.touches.length){F[D]={pageX:x(E.touches[D].pageX),pageY:x(E.touches[D].pageY)};D++}return{timestamp:l.now(),gesture:E.gesture,touches:F,center:p(E.touches),deltaX:E.deltaX,deltaY:E.deltaY}};var f=function(I){var H=l.gestures.session;var D=I.center;var E=H.offsetDelta||{};var F=H.prevDelta||{};var G=H.prevTouch||{};if(I.gesture.type===l.event.start||I.gesture.type===l.event.end){F=H.prevDelta={x:G.deltaX||0,y:G.deltaY||0};E=H.offsetDelta={x:D.x,y:D.y}}I.deltaX=F.x+(D.x-E.x);I.deltaY=F.y+(D.y-E.y)};var h=function(I){var H=l.gestures.session;var J=I.touches;var K=J.length;if(!H.firstTouch){H.firstTouch=j(I)}if(w()&&K>1&&!H.firstMultiTouch){H.firstMultiTouch=j(I)}else{if(K===1){H.firstMultiTouch=false}}var F=H.firstTouch;var E=H.firstMultiTouch;var G=E?E.center:F.center;var D=I.center=p(J);I.timestamp=l.now();I.deltaTime=I.timestamp-F.timestamp;I.angle=m(G,D);I.distance=o(G,D);f(I);I.offsetDirection=n(I.deltaX,I.deltaY);I.scale=E?r(E.touches,J):1;I.rotation=E?q(E.touches,J):0;g(I)};var e=25;var g=function(J){var I=l.gestures.session;var H=I.lastInterval||J;var D=J.timestamp-H.timestamp;var L;var M;var N;var G;if(J.gesture.type!=l.event.cancel&&(D>e||H.velocity===undefined)){var E=H.deltaX-J.deltaX;var F=H.deltaY-J.deltaY;var K=t(D,E,F);M=K.x;N=K.y;L=(a(K.x)>a(K.y))?K.x:K.y;G=n(E,F)||H.direction;I.lastInterval=J}else{L=H.velocity;M=H.velocityX;N=H.velocityY;G=H.direction}J.velocity=L;J.velocityX=M;J.velocityY=N;J.direction=G};var A={};var i=function(E){for(var D=0;D<E.length;D++){!E.identifier&&(E.identifier=0)}return E};var s=function(H,L){var D=i(l.slice.call(H.touches||[H]));var N=H.type;var K=[];var E=[];if((N===l.event.start||N===l.event.move)&&D.length===1){A[D[0].identifier]=true;K=D;E=D;L.target=H.target}else{var I=0;var K=[];var E=[];var F=i(l.slice.call(H.changedTouches||[H]));L.target=H.target;var J=l.gestures.session.target||H.target;K=D.filter(function(O){return v(O.target,J)});if(N===l.event.start){I=0;while(I<K.length){A[K[I].identifier]=true;I++}}I=0;while(I<F.length){if(A[F[I].identifier]){E.push(F[I])}if(N===l.event.end||N===l.event.cancel){delete A[F[I].identifier]}I++}if(!E.length){return false}}K=B(K.concat(E),"identifier",true);var M=K.length;var G=E.length;if(N===l.event.start&&M-G===0){L.isFirst=true;l.gestures.touch=l.gestures.session={target:H.target}}L.isFinal=((N===l.event.end||N===l.event.cancel)&&(M-G===0));L.touches=K;L.changedTouches=E;return true};var u=function(D){var E={gesture:D};var F=s(D,E);if(!F){return}h(E);k(D,E);l.gestures.session.prevTouch=E;if(D.type===l.event.end&&!l.event.supportTouch){l.gestures.touch=l.gestures.session={}}D=D||C.event;l.preventDefault(D);return false};var d=$("body")[0];d.addEventListener(l.event.start,u);d.addEventListener(l.event.move,u,{passive:false});d.addEventListener(l.event.end,u);d.addEventListener(l.event.cancel,u);l.isScrolling=false;var y=null;C.addEventListener("scroll",function(){l.isScrolling=true;y&&clearTimeout(y);y=setTimeout(function(){l.isScrolling=false},250)})})(window.fui,window);(function(a,c){var b=function(d,f){var e=a.gestures.session;switch(d.type){case a.event.start:break;case a.event.move:if(!f.direction||!e.target){return}if(e.lockDirection&&e.startDirection){if(e.startDirection&&e.startDirection!==f.direction){if(e.startDirection==="up"||e.startDirection==="down"){f.direction=f.deltaY<0?"up":"down"}else{f.direction=f.deltaX<0?"left":"right"}}}if(!e.drag){e.drag=true;a.trigger(e.target,c+"start",f)}a.trigger(e.target,c,f);a.trigger(e.target,c+f.direction,f);break;case a.event.end:case a.event.cancel:if(e.drag&&f.isFinal){a.trigger(e.target,c+"end",f)}break}};a.addGesture({name:c,index:20,handle:b,options:{fingers:1}})})(fui,"drag");(function(b,d){var a=0;var c=function(e,i){var h=b.gestures.session;var g=this.options;var f=b.now();switch(e.type){case b.event.move:if(f-a>300){a=f;h.flickStart=i.center}break;case b.event.end:case b.event.cancel:i.flick=false;if(h.flickStart&&g.flickMaxTime>(f-a)&&i.distance>g.flickMinDistince){i.flick=true;i.flickTime=f-a;i.flickDistanceX=i.center.x-h.flickStart.x;i.flickDistanceY=i.center.y-h.flickStart.y;b.trigger(h.target,d,i);b.trigger(h.target,d+i.direction,i)}break}};b.addGesture({name:d,index:5,handle:c,options:{flickMaxTime:200,flickMinDistince:10}})})(fui,"flick");(function(a,c){var d;var b=function(e,h){var g=a.gestures.session;var f=this.options;switch(e.type){case a.event.start:if(a.options.gestureConfig.hold){d&&clearTimeout(d);d=setTimeout(function(){h.hold=true;a.trigger(g.target,c,h)},f.holdTimeout)}break;case a.event.move:break;case a.event.end:case a.evetn.cancel:if(d){clearTimeout(d)&&(d=null);a.trigger(g.target,"release",h)}break}};a.addGesture({name:c,index:10,handle:b,options:{fingers:1,holdTimeout:0}})})(fui,"hold");(function(a,c){var b=function(d,k){var f=this.options;var j=a.gestures.session;switch(d.type){case a.event.start:break;case a.event.move:if(a.options.gestureConfig.pinch){if(k.touches.length<2){return}if(!j.pinch){j.pinch=true;a.trigger(j.target,c+"start",k)}a.trigger(j.target,c,k);var h=k.scale;var g=k.rotation;var e=typeof k.lastScale==="undefined"?1:k.lastScale;var i=1e-12;if(h>e){e=h-i;a.trigger(j.target,c+"out",k)}else{if(h<e){e=h+i;a.trigger(j.target,c+"in",k)}}if(Math.abs(g)>f.minRotationAngle){a.trigger(j.target,"rotate",k)}}break;case a.event.end:case a.event.cancel:if(a.options.gestureConfig.pinch&&j.pinch&&k.touches.length===2){j.pinch=false;a.trigger(j.target,c+"end",k)}break}};a.addGesture({name:c,index:10,handle:b,options:{minRotationAngle:0}})})(fui,"pinch");(function(a,c){var b=function(d,g){var f=a.gestures.session;if(d.type===a.event.end||d.type===a.event.cancel){var e=this.options;g.swipe=false;if(g.direction&&e.swipeMaxTime>g.deltaTime&&g.distance>e.swipeMinDistince){g.swipe=true;a.trigger(f.target,c,g);a.trigger(f.target,c+g.direction,g)}}};a.addGesture({name:c,index:10,handle:b,options:{swipeMaxTime:300,swipeMinDistince:18}})})(fui,"fswipe");(function(l,t,o){var m=l([]),q=l.resize=l.extend(l.resize,{}),u,w="setTimeout",v="resize",p=v+"-special-event",n="delay",r="throttleWindow";q[n]=250;q[r]=true;l.event.special[v]={setup:function(){if(!q[r]&&this[w]){return false}var a=l(this);m=m.add(a);l.data(this,p,{w:a.width(),h:a.height()});if(m.length===1){s()}},teardown:function(){if(!q[r]&&this[w]){return false}var a=l(this);m=m.not(a);a.removeData(p);if(!m.length){clearTimeout(u)}},add:function(a){if(!q[r]&&this[w]){return false}var c;function b(h,d,e){var f=l(this),g=l.data(this,p);g.w=d!==o?d:f.width();g.h=e!==o?e:f.height();c.apply(this,arguments)}if(l.isFunction(a)){c=a;return b}else{c=a.handler;a.handler=b}}};function s(){u=t[w](function(){m.each(function(){var c=l(this),b=c.width(),a=c.height(),d=l.data(this,p);if(b!==d.w||a!==d.h){c.trigger(v,[d.w=b,d.h=a])}});s()},q[n])}})(jQuery,this);(function(a,d){var g={};var f=0;var e=0;var c=false;var b={doQueue:function(){if(!c){c=true;var h=g[e];if(h){b[h.type](h.op,function(){delete g[e];e++;c=false;if(e<f){b.doQueue()}})}else{c=false;if(e<f){e++;b.doQueue()}}}},open:function(k,j){var l=null;if(d.nav.page.data[k.id]){l=d.nav.page.data[k.id];l.load=false;var h=l.op.fclass;l.preid=d.nav.page.activeid||"";l.op=k;l.$page.removeAttr("style");l.$page.attr("data-type",k.type);l.$page.removeClass(h);l.$page.addClass(k.fclass);l.hasLoad=true}else{k.pageid=d.guid();var i='<div class="f-page '+k.fclass+'" data-type="'+k.type+'" id="'+k.pageid+'">';i+='<div class="f-page-header" >';i+='<div class="f-page-backbtn" > '+k.backbtn+" </div>";i+='<div class="f-page-title">'+k.title+"</div>";i+="</div>";i+='<div class="f-page-body"></div>';i+="</div>";a("body").append(i);l={$page:a("#"+k.pageid),preid:d.nav.page.activeid||"",op:k,load:false};d.nav.page.data[k.id]=l;d.nav.page.count++;b.bindEvent(l.$page)}d.nav.page.activeid=k.id;k.start&&k.start(l);switch(k.type){case"right":l.$page.animate({left:"0px"},200,function(){b.addPage(l);j()});break;case"bottom":l.$page.animate({top:"0px"},200,function(){b.addPage(l);j()});break;default:l.$page.fadeIn(function(){b.addPage(l);j()});break}},close:function(k,i){var j=k.op;if(j.bfdestroy){if(!j.bfdestroy(k,"backbtn")){i()}}d.nav.page.activeid="";if(k.preid){var h=d.nav.page.data[k.preid];h.load=false;h.$page.show();d.nav.page.activeid=k.preid;h=null}k.$page.css({"z-index":3});switch(j.type){case"right":k.$page.animate({left:"100%"},200,function(){b.removePage(k);i()});break;case"bottom":k.$page.animate({top:"100%"},200,function(){b.removePage(k);i()});break;default:k.$page.fadeOut(function(){b.removePage(k);i()});break}},bindEvent:function(h){h.find(".f-page-backbtn").on("tap",function(){var i=d.nav.page.activeid;var j=d.nav.page.data[i];if(!j.load){return false}g[f]={type:"close",op:j};f++;b.doQueue();return false})},addPage:function(i){if(i.preid!=""){var h=d.nav.page.data[i.preid];h.$page.hide()}i.$page.css({"z-index":1});i.op.end&&i.op.end(i);i.load=true},removePage:function(i){i.$page.remove();i.$page=null;a('[data-page="'+i.op.pageid+'"]').remove();i.op.destroy&&i.op.destroy(i);if(i.preid){var h=d.nav.page.data[i.preid];if(h.op.end){h.hasLoad=true;h.op.end(h)}h.load=true}d.nav.page.count--;d.nav.page.data[i.op.id]=null},remove:function(h){var i=d.nav.page.data[h];if(i!=null){i.$page.remove();i.$page=null;a('[data-page="'+i.op.pageid+'"]').remove();d.nav.page.count--;d.nav.page.data[i.op.id]=null;i=null}}};d.nav={page:{data:{},count:0,activeid:""},go:function(i){var h={id:"",title:"",type:"",backbtn:'<a href="#">返回</a>',fclass:"",start:false,end:false,bfdestroy:false,destroy:false};a.extend(h,i||{});g[f]={type:"open",op:i};f++;b.doQueue()},closeCurrent:function(){var h=d.nav.page.activeid;var i=d.nav.page.data[h];g[f]={type:"close",op:i};f++;b.doQueue()},close:function(h){b.remove(h)}}})(window.jQuery,window.fui);(function(a,b){b.layer={open:function(f){var e={title:"",backbtn:'<a href="#">返回</a>',open:false,close:false,cancel:false,};a.extend(e,f||{});e.layerid=b.guid();var d='            <div class="f-layer" id="'+e.layerid+'">                <div class="f-layer-closebtn" >关闭</div>                <div class="f-layer-cancelbtn" >取消</div>                <div class="f-layer-page" data-level="0" >                    <div class="f-layer-page-header" >                        <div class="f-layer-page-title">'+e.title+'</div>                    </div>                    <div class="f-layer-page-body"></div>                </div>                <div class="f-layer-mask" ></div>            </div>';a("body").append(d);var c=a("#"+e.layerid);c[0].fop=e;c.find(".f-layer-cancelbtn").on("tap",function(){var h=a(this);var g=h.parent();g.animate({top:"100%"},200,function(){var i=a(this)[0].fop;setTimeout(function(){var j=a("#"+i.layerid);j.remove();i.cancel&&i.cancel();j=null},100)})});c.find(".f-layer-closebtn").on("tap",function(){var h=a(this);var g=h.parent();var j=g[0].fop;var i=g.find('[data-level="'+j.level+'"]');g.find(".f-layer-closebtn").hide();g.find(".f-layer-page").show();i.animate({left:"100%"},200,function(){var k=a(this);var l=k.parent()[0].fop;l.level=0;setTimeout(function(){g.find(".f-layer-left-page").remove();l.close&&l.close(l.layerid,l.level,l);g=null},100)})});e.level=0;c.animate({top:"0px"},200,function(){var g=a(this)[0].fop;setTimeout(function(){var h=a("#"+g.layerid+' [data-level="'+g.level+'"] .f-layer-page-body');g.open&&g.open(h,g.layerid,g.level,g)},100)});c=null},iopen:function(h,i){var c=a("#"+h);var d=c.find(".f-layer-mask");d.show();var g=c[0].fop;g.level=g.level+1;var f='            <div class="f-layer-left-page" data-level="'+g.level+'" >                <div class="f-layer-page-header" >                    <div class="f-layer-page-backbtn" >'+g.backbtn+'</div>                    <div class="f-layer-page-title">'+i+'</div>                </div>                <div class="f-layer-page-body"></div>            </div>';c.append(f);var e=c.find('[data-level="'+g.level+'"]');e.find(".f-layer-page-backbtn").on("tap",function(){var j=a(this);var l=j.parents(".f-layer-left-page");var k=l.parent();var m=k[0].fop;m.level=m.level-1;if(m.level<2){k.find(".f-layer-closebtn").hide()}k.find('[data-level="'+m.level+'"]').show();l.css({"z-index":5});l.animate({left:"100%"},200,function(){var n=a(this);var o=n.parent()[0].fop;setTimeout(function(){n.remove();o.close&&o.close(o.layerid,o.level,o)},100)})});e.animate({left:"0px"},200,function(){var k=a(this);k.css({"z-index":4});var j=k.parent();var l=j[0].fop;if(l.level>=2){j.find(".f-layer-closebtn").show()}j.find('[data-level="'+(l.level-1)+'"]').hide();setTimeout(function(){var m=k.find(".f-layer-page-body");l.open&&l.open(m,l.layerid,l.level,l)},100);d.hide()});c=null},close:function(c){a("#"+c+" .f-layer-cancelbtn").trigger("click")},iclose:function(c){a("#"+c+" .f-layer-closebtn").trigger("click")},closeLayer:function(d){var c=a("#"+d);var e=c[0].fop.level;c.find('[data-level="'+e+'"] .f-layer-page-backbtn').trigger("click")}}})(window.jQuery,window.fui);(function(a,c){var e=navigator.platform.toLowerCase();var f=navigator.userAgent.toLowerCase();var d=(f.indexOf("iphone")>-1||f.indexOf("ipad")>-1||f.indexOf("ipod")>-1)&&(e.indexOf("iphone")>-1||e.indexOf("ipad")>-1||e.indexOf("ipod")>-1);var b={init:function(g,i){var h='<div class="f-pciker-rule"></div><ul class="f-pciker-list"></ul>';g.addClass("f-picker");g.html(h);b.initParams(g);b.initData(g,i);b.bindEvent(g)},initParams:function(g){var h=g[0];h.list=g.find("ul")[0];h.height=h.offsetHeight;h.r=h.height/2-10;h.d=h.r*2;h.itemHeight=40;h.itemAngle=parseInt(b.calcAngle(h,h.itemHeight*0.8));h.hightlightRange=h.itemAngle/2;h.visibleRange=90;h.beginAngle=0;h.beginExceed=h.beginAngle-30;h.list.angle=h.beginAngle;h.lastMoveTime=0;h.lastMoveStart=0;h.stopInertiaMove=false;h.lastAngle=0;h.startY=null;h.isPicking=false;h.selected=null;h.preselected=null;h.list.style.webkitTransition="150ms ease-out";if(d){h.list.style.webkitTransformOrigin="center center "+h.r+"px"}},initData:function(i,k){var g=i.find("ul");g.html("");var l=i[0];l.items=[];var j="";k.data=k.data||[];a.each(k.data,function(m,o){var n={id:m,text:o[k.text],value:o[k.value],angle:l.itemAngle*m,obj:o};l.endAngle=n.angle;l.items.push(n);if(m<=20){j+='<li data-index="'+m+'" style="transform-origin: center center -'+l.r+"px; transform: translateZ("+l.r+"px) rotateX(-"+n.angle+'deg);">'+n.text+"</li>"}});l.beginindex=0;l.endindex=20;l.endExceed=l.endAngle+30;g.html(j);b.setAngle(l,l.beginAngle);if(!!l.selected){var h=a(l);h.trigger("change");if(!!k.change){k.change(l.selected.obj,h)}}},bindEvent:function(g){var h=g[0];h.addEventListener(c.event.start,function(i){var j=a(this)[0];j.isPicking=true;c.preventDefault(i);j.list.style.webkitTransition="";j.startY=(i.changedTouches?i.changedTouches[0]:i).pageY;j.lastAngle=j.list.angle;b.updateInertiaParams(j,i,true)},false);h.addEventListener(c.event.end,function(i){var j=a(this)[0];j.isPicking=false;c.preventDefault(i);b.startInertiaScroll(j,i)},false);h.addEventListener(c.event.cancel,function(i){var j=a(this)[0];j.isPicking=false;c.preventDefault(i);b.startInertiaScroll(j,i)},false);h.addEventListener(c.event.move,function(l){var n=a(this)[0];if(!n.isPicking){return}c.preventDefault(l);var k=(l.changedTouches?l.changedTouches[0]:l).pageY;var j=k-n.startY;var i=b.calcAngle(n,j);var m=j>0?n.lastAngle-i:n.lastAngle+i;if(m>n.endExceed){m=n.endExceed}if(m<n.beginExceed){m=n.beginExceed}b.setAngle(n,m);b.updateInertiaParams(n,l)},false)},updateInertiaParams:function(k,g,h){var j=g.changedTouches?g.changedTouches[0]:g;if(h){k.lastMoveStart=j.pageY;k.lastMoveTime=g.timeStamp||Date.now();k.startAngle=k.list.angle}else{var i=g.timeStamp||Date.now();if(i-k.lastMoveTime>300){k.lastMoveTime=i;k.lastMoveStart=j.pageY}}k.stopInertiaMove=true},startInertiaScroll:function(o,l){var n=l.changedTouches?l.changedTouches[0]:l;var m=l.timeStamp||Date.now();var r=(n.pageY-o.lastMoveStart)/(m-o.lastMoveTime);var h=r>0?-1:1;var g=h*0.0006*-1;var k=Math.abs(r/g);var i=r*k/2;var q=o.list.angle;var j=b.calcAngle(o,i)*h;var p=j;if(q+j<o.beginExceed){j=o.beginExceed-q;k=k*(j/p)*0.6}if(q+j>o.endExceed){j=o.endExceed-q;k=k*(j/p)*0.6}if(j==0){b.endScroll(o);return}b.scrollDistAngle(o,m,q,j,k)},scrollDistAngle:function(j,i,k,g,h){j.stopInertiaMove=false;(function(p,q,l,m){var n=13;var r=m/n;var s=0;(function o(){if(j.stopInertiaMove){return}var t=b.quartEaseOut(s,q,l,r);b.setAngle(j,t);s++;if(s>r-1||t<j.beginExceed||t>j.endExceed){b.endScroll(j);return}setTimeout(o,n)})()})(i,k,g,h)},endScroll:function(j){if(j.list.angle<j.beginAngle){j.list.style.webkitTransition="150ms ease-out";b.setAngle(j,j.beginAngle)}else{if(j.list.angle>j.endAngle){j.list.style.webkitTransition="150ms ease-out";b.setAngle(j,j.endAngle)}else{var h=parseInt((j.list.angle/j.itemAngle).toFixed(0));j.list.style.webkitTransition="100ms ease-out";b.setAngle(j,j.itemAngle*h)}}if(j.preselected!=j.selected){var g=a(j);var i=j.fop;g.trigger("change");if(!!i.change){i.change(j.selected.obj,g)}}},calcElementItemVisibility:function(o,l){var h=a(o);var g=h.find("ul");var k="";var q=0;var p=o.items.length;a.each(o.items,function(i,s){var r=Math.abs(s.angle-l);if(r<o.hightlightRange){o.selected=s;if(!s.hightlight||!g.find('li[data-index="'+i+'"]').hasClass("highlight")){s.hightlight=true;g.find('li[data-index="'+i+'"]').addClass("highlight")}}else{if(r<o.visibleRange){if(!s.visible||!g.find('li[data-index="'+i+'"]').hasClass("visible")){s.visible=true;g.find('li[data-index="'+i+'"]').addClass("visible")}if(!!s.hightlight||g.find('li[data-index="'+i+'"]').hasClass("highlight")){s.hightlight=false;g.find('li[data-index="'+i+'"]').removeClass("highlight")}if(p>i){p=i}if(q<i){q=i}}else{if(!!s.visible||g.find('li[data-index="'+i+'"]').hasClass("visible")){s.visible=false;g.find('li[data-index="'+i+'"]').removeClass("visible")}if(!!s.hightlight||g.find('li[data-index="'+i+'"]').hasClass("highlight")){s.hightlight=false;g.find('li[data-index="'+i+'"]').removeClass("highlight")}}}});if(o.items.length>21){if(q>=o.endindex){var n=o.endindex+11;for(var m=o.endindex+1;m<n;m++){if(!!o.items[m]){var j="";if(!!o.items[m].visible){j='class="visible"'}g.append("<li "+j+' data-index="'+m+'"  style="transform-origin: center center -'+o.r+"px; transform: translateZ("+o.r+"px) rotateX(-"+o.items[m].angle+'deg);">'+o.items[m].text+"</li>");g.find('li[data-index="'+(m-21)+'"]').remove();o.endindex++;o.beginindex++}}}else{if(p<=o.beginindex){var n=o.beginindex-11;for(var m=o.beginindex-1;m>n;m--){if(!!o.items[m]){var j="";if(!!o.items[m].visible){j='class="visible"'}g.prepend("<li "+j+' data-index="'+m+'"  style="transform-origin: center center -'+o.r+"px; transform: translateZ("+o.r+"px) rotateX(-"+o.items[m].angle+'deg);">'+o.items[m].text+"</li>");g.find('li[data-index="'+(m+21)+'"]').remove();o.endindex--;o.beginindex--}}}}}},setAngle:function(h,g){h.list.angle=g;h.list.style.webkitTransform="perspective(1000px) rotateY(0deg) rotateX("+g+"deg)";b.calcElementItemVisibility(h,g)},calcAngle:function(m,j){var g=parseFloat(m.r);var i=parseFloat(m.r);j=Math.abs(j);var l=parseInt(j/m.d)*180;j=j%m.d;var k=(g*g+i*i-j*j)/(2*g*i);var h=l+b.rad2deg(Math.acos(k));return h},rad2deg:function(g){return g/(Math.PI/180)},quartEaseOut:function(j,g,h,i){return -h*((j=j/i-1)*j*j*j-1)+g}};a.fn.fpicker=function(i){var h={data:[],value:"value",text:"text",change:null};var g=a(this);if(!!g[0].fop){return g}a.extend(h,i||{});g[0].fop=h;b.init(g,h);return g};a.fn.fpickerSetData=function(h){var g=a(this);if(!g[0].fop){return g}g[0].fop.data=h;b.initParams(g);b.initData(g,g[0].fop);return g};a.fn.fpickerSet=function(i){var g=a(this);var h=g[0];if(!h.fop){return g}h._value=i;a.each(h.items,function(l,n){if(n.value==i){b.setAngle(h,n.angle);if(h.items.length>21){var j=g.find("ul");j.html("");h.beginindex=n.id-10;h.endindex=n.id+10;for(var m=h.beginindex;m<h.endindex+1;m++){if(!!h.items[m]){var k="";if(!!h.items[m].visible){k='class="visible"'}if(!!h.items[m].hightlight){k='class="highlight"'}j.append("<li "+k+' data-index="'+m+'"  style="transform-origin: center center -'+h.r+"px; transform: translateZ("+h.r+"px) rotateX(-"+h.items[m].angle+'deg);">'+h.items[m].text+"</li>")}}if(!!h.selected){g.trigger("change");if(!!h.fop.change){h.fop.change(h.selected.obj,g)}}}return false}})};a.fn.fpickerGet=function(){var g=a(this);return g[0].selected.value||""};a.fn.fpickerGetObj=function(){var g=a(this);return g[0].selected}})(window.jQuery,window.fui);(function(a,c){var b={init:function(d,f){f.id=c.guid();var e='<div class="f-poppicker f-pop" id="pop_'+f.id+'"  data-page="'+c.pageid()+'"  >';e+='<div class="f-poppicker-header" >';e+='<div class="f-poppicker-cancel">取消</div>';e+='<div class="f-poppicker-ok">确定</div>';e+="</div>";e+='<div class="f-poppicker-body" ></div>';e+="</div>";a("body").append(e);c.createMask();b.initPicker(f);b.bindEvent(d,f)},bindEvent:function(e,f){e.on("tap",function(){var h=a(this);if(h.attr("readonly")||h.parents(".lr-form-row").attr("readonly")){return false}var j=h[0];var i=j.fop;if(!!i.callback){i.callback()}var g=a("#pop_"+i.id);if(!g.hasClass("active")){g.addClass("active");c.showMask()}setTimeout(function(){if(i.value!=undefined&&i.value!=""&&i.value!=null){var k=i.value.split(",");a.each(k,function(m,n){var l=a("#picker_"+i.id+"_"+m);l.fpickerSet(n)})}},300);return false});var d=a("#pop_"+f.id);d.find(".f-poppicker-cancel").on("tap",function(){var g=a(this).parents(".f-poppicker");g.removeClass("active");c.hideMask();return false});d.find(".f-poppicker-ok").on("tap",{$self:e,fop:f},function(l){var h=a(this).parents(".f-poppicker");h.removeClass("active");c.hideMask();l=l||window.event;var m=l.data.fop;var j=l.data.$self;var p=[];var q=[];var k=[];for(var n=0;n<m.level;n++){var g=a("#picker_"+m.id+"_"+n);var o=g.fpickerGetObj();p.push(o.text);q.push(o.value);k.push(o)}if(m.value!=String(q)){m.value=String(q);m.text=String(p);j.trigger("change");if(!!m.change){m.change(m.value,m.text,k,j)}}return false})},initPicker:function(g){var e=a("#pop_"+g.id+" .f-poppicker-body");for(var f=0;f<g.level;f++){var d=a('<div id="picker_'+g.id+"_"+f+'"  data-level="'+f+'"  ></div>');d.css("width",(100/g.level+"%"));e.append(d);d.fpicker({data:[],value:g.ivalue,text:g.itext,change:function(k,h){var j=parseInt(h.attr("data-level"))+1;if(g.level>1&&j<g.level){var i=a("#picker_"+g.id+"_"+j);i.fpickerSetData(k.children)}}})}a("#picker_"+g.id+"_0").fpickerSetData(g.data)}};a.fn.fpoppicker=function(f){var e={data:[],level:1,change:false,ivalue:"value",itext:"text"};var d=a(this);if(!!d[0].fop){return d}a.extend(e,f||{});d[0].fop=e;b.init(d,e);return d};a.fn.fpoppickerSet=function(h){var d=a(this);var f=d[0].fop;if(h!=undefined&&h!=""&&h!=null){var i=h.split(",");var g=[];var e=[];a.each(i,function(k,m){var j=a("#picker_"+f.id+"_"+k);j.fpickerSet(m);var l=j.fpickerGetObj();if(l){g.push(l.text||"");e.push(l)}});f.value=h;f.text=String(g);d.trigger("change");if(!!f.change){f.change(f.value,f.text,e,d)}}};a.fn.fpoppickerSetData=function(e){var d=a(this);if(d.length>0){var f=d[0].fop;if(f){a("#picker_"+f.id+"_0").fpickerSetData(e)}}d=null}})(window.jQuery,window.fui);(function(a,c){var b={init:function(e,h){h.id=c.guid();var g='<div class="f-dtpicker f-pop" id="dt_'+h.id+'" data-type="'+h.type+'"   data-page="'+c.pageid()+'"  >';g+='<div class="f-dtpicker-header" >';g+='<div class="f-dtpicker-cancel">取消</div>';g+='<div class="f-dtpicker-ok">确定</div>';g+="</div>";g+='<div class="f-dtpicker-title">';g+='<h5 data-id="title-y">'+h.label[0]+"</h5>";g+='<h5 data-id="title-m">'+h.label[1]+"</h5>";g+='<h5 data-id="title-d">'+h.label[2]+"</h5>";g+='<h5 data-id="title-h">'+h.label[3]+"</h5>";g+='<h5 data-id="title-i">'+h.label[4]+"</h5>";g+="</div>";g+='<div class="f-dtpicker-body" ></div>';g+="</div>";a("body").append(g);c.createMask();switch(h.type){case"datetime":var f=b.initYear(h);var d=b.initMonth(h);b.initDay(h,f,d);b.initHour(h);b.initMinute(h);break;case"date":var f=b.initYear(h);var d=b.initMonth(h);b.initDay(h,f,d);break;case"time":b.initHour(h);b.initMinute(h);break;case"month":b.initYear(h);b.initMonth(h);break;default:var f=b.initYear(h);var d=b.initMonth(h);b.initDay(h,f,d);b.initHour(h);b.initMinute(h);break}b.bindEvent(e,h)},bindEvent:function(e,f){e.on("tap",function(){var h=a(this);if(h.attr("readonly")||h.parents(".lr-form-row").attr("readonly")){return false}var j=h[0];var i=j.fop;if(!!i.callback){i.callback()}var g=a("#dt_"+i.id);if(!g.hasClass("active")){g.addClass("active");c.showMask()}setTimeout(function(){if(i.value!=undefined&&i.value!=""&&i.value!=null){b.setValue(i,i.value)}},300);return false});var d=a("#dt_"+f.id);d.find(".f-dtpicker-cancel").on("tap",function(){var g=a(this).parents(".f-dtpicker");g.removeClass("active");c.hideMask();return false});d.find(".f-dtpicker-ok").on("tap",{$self:e,fop:f},function(i){var g=a(this).parents(".f-dtpicker");g.removeClass("active");c.hideMask();var j=i.data.fop;var h=i.data.$self;var l="";switch(j.type){case"datetime":var k=b.getfYear(j)+"-"+b.getfMonth(j)+"-"+b.getfDay(j)+" "+b.getfHour(j)+":"+b.getfMinute(j);l=c.date.format(k,j.format||"yyyy-MM-dd hh:mm");break;case"date":var k=b.getfYear(j)+"-"+b.getfMonth(j)+"-"+b.getfDay(j);l=c.date.format(k,j.format||"yyyy-MM-dd");break;case"time":var k="2017-12-18 "+b.getfHour(j)+":"+b.getfMinute(j);l=c.date.format(k,j.format||"hh:mm");break;case"month":var k=b.getfYear(j)+"-"+b.getfMonth(j)+"-01";l=c.date.format(k,j.format||"yyyy-MM");break}if(j.value!=l){j.value=l;h.trigger("change");if(!!j.change){j.change(j.value,h)}}return false})},initYear:function(l){var h=[];var g=new Date();var m=g.getFullYear();for(var j=-50;j<51;j++){var f=m+j;var k={text:f,value:f};h.push(k)}var e=a("#dt_"+l.id+" .f-dtpicker-body");var d=a('<div id="picker_'+l.id+'_y" class="f-dt-picker f-dt-y" ></div>');e.append(d);d.fpicker({data:h}).fpickerSet(m);return d},initMonth:function(h){var f=new Date();var g=f.getMonth()+1;var e=a("#dt_"+h.id+" .f-dtpicker-body");var d=a('<div id="picker_'+h.id+'_m" class="f-dt-picker f-dt-m" ></div>');e.append(d);d.fpicker({data:[{text:"01",value:1},{text:"02",value:2},{text:"03",value:3},{text:"04",value:4},{text:"05",value:5},{text:"06",value:6},{text:"07",value:7},{text:"08",value:8},{text:"09",value:9},{text:"10",value:10},{text:"11",value:11},{text:"12",value:12}]}).fpickerSet(g);return d},initDay:function(k,g,d){var h=new Date();var i=h.getDate();var j=d.fpickerGet();var l=g.fpickerGet();var f=a("#dt_"+k.id+" .f-dtpicker-body");var e=a('<div id="picker_'+k.id+'_d" class="f-dt-picker f-dt-d" ></div>');f.append(e);e.fpicker({data:b.getDayData(l,j)}).fpickerSet(i);g[0].fop.change=function(t,m){var r=t.value;var q=d.fpickerGet();var o=e.fpickerGet();var p=e[0].fop.data.length;var s=b.getDayNum(r,q);if(p!=s){if(o>s){o=s}var n=b.getDayData(r,q);e.fpickerSetData(n).fpickerSet(o)}};d[0].fop.change=function(t,m){var q=t.value;var r=g.fpickerGet();var o=e.fpickerGet();var p=e[0].fop.data.length;var s=b.getDayNum(r,q);if(p!=s){if(o>s){o=s}var n=b.getDayData(r,q);e.fpickerSetData(n).fpickerSet(o)}}},initHour:function(i){var g=[{text:"00",value:0},{text:"01",value:1},{text:"02",value:2},{text:"03",value:3},{text:"04",value:4},{text:"05",value:5},{text:"06",value:6},{text:"07",value:7},{text:"08",value:8},{text:"09",value:9},{text:"10",value:10},{text:"11",value:11},{text:"12",value:12},{text:"13",value:13},{text:"14",value:14},{text:"15",value:15},{text:"16",value:16},{text:"17",value:17},{text:"18",value:18},{text:"19",value:19},{text:"20",value:20},{text:"21",value:21},{text:"22",value:22},{text:"23",value:23},];var f=new Date();var h=f.getHours();var e=a("#dt_"+i.id+" .f-dtpicker-body");var d=a('<div id="picker_'+i.id+'_h" class="f-dt-picker f-dt-h" ></div>');e.append(d);d.fpicker({data:g}).fpickerSet(h)},initMinute:function(i){var g=[{text:"00",value:0},{text:"01",value:1},{text:"02",value:2},{text:"03",value:3},{text:"04",value:4},{text:"05",value:5},{text:"06",value:6},{text:"07",value:7},{text:"08",value:8},{text:"09",value:9},{text:"10",value:10},{text:"11",value:11},{text:"12",value:12},{text:"13",value:13},{text:"14",value:14},{text:"15",value:15},{text:"16",value:16},{text:"17",value:17},{text:"18",value:18},{text:"19",value:19},{text:"20",value:20},{text:"21",value:21},{text:"22",value:22},{text:"23",value:23},{text:"24",value:24},{text:"25",value:25},{text:"26",value:26},{text:"27",value:27},{text:"28",value:28},{text:"29",value:29},{text:"30",value:30},{text:"31",value:31},{text:"32",value:32},{text:"33",value:33},{text:"34",value:34},{text:"35",value:35},{text:"36",value:36},{text:"37",value:37},{text:"38",value:38},{text:"39",value:39},{text:"40",value:40},{text:"41",value:41},{text:"42",value:42},{text:"43",value:43},{text:"44",value:44},{text:"45",value:45},{text:"46",value:46},{text:"47",value:47},{text:"48",value:48},{text:"49",value:49},{text:"50",value:50},{text:"51",value:51},{text:"52",value:52},{text:"53",value:53},{text:"54",value:54},{text:"55",value:55},{text:"56",value:56},{text:"57",value:57},{text:"58",value:58},{text:"59",value:59}];var f=new Date();var h=f.getMinutes();var e=a("#dt_"+i.id+" .f-dtpicker-body");var d=a('<div id="picker_'+i.id+'_i" class="f-dt-picker f-dt-i" ></div>');e.append(d);d.fpicker({data:g}).fpickerSet(h)},getDayData:function(j,h){var f=[];for(var g=1;g<=b.getDayNum(j,h);g++){var e="";if(g<10){e="0"+g}else{e=""+g}var d={text:e,value:g};f.push(d)}return f},getDayNum:function(e,d){if([1,3,5,7,8,10,12].indexOf(d)>-1){return 31}else{if([4,6,9,11].indexOf(d)>-1){return 30}else{if(c.date.isLeapYear(e)){return 29}else{return 28}}}},getfYear:function(e){var d=a("#picker_"+e.id+"_y");return d.fpickerGet()},getfMonth:function(e){var d=a("#picker_"+e.id+"_m");return d.fpickerGetObj().text},getfDay:function(e){var d=a("#picker_"+e.id+"_d");return d.fpickerGetObj().text},getfHour:function(e){var d=a("#picker_"+e.id+"_h");return d.fpickerGetObj().text},getfMinute:function(e){var d=a("#picker_"+e.id+"_i");return d.fpickerGetObj().text},setValue:function(k,l){if(k.type=="time"){l="2017-12-08 "+l}var j=c.date.parse(l);var i=a("#picker_"+k.id+"_y");if(i.length>0){i.fpickerSet(j.getFullYear())}var h=a("#picker_"+k.id+"_m");if(h.length>0){h.fpickerSet(j.getMonth()+1)}var e=a("#picker_"+k.id+"_d");if(e.length>0){e.fpickerSet(j.getDate())}var f=a("#picker_"+k.id+"_h");if(f.length>0){f.fpickerSet(j.getHours())}var g=a("#picker_"+k.id+"_i");if(g.length>0){g.fpickerSet(j.getMinutes())}}};a.fn.fdtpicker=function(f){var e={type:"datetime",label:["年","月","日","时","分"],format:false,change:false};var d=a(this);if(!!d[0].fop){return d}a.extend(e,f||{});d[0].fop=e;b.init(d,e);return d}})(window.jQuery,window.fui);(function(a){var b={init:function(c){c.addClass("f-switch");c.html('<div class="f-switch-handle"></div>');c.on("tap",function(){var d=a(this);if(d.attr("readonly")||d.parents(".lr-form-row").attr("readonly")){return false}if(d.hasClass("f-active")){d.removeClass("f-active")}else{d.addClass("f-active")}d.trigger("change");return false})}};a.fn.fswitch=function(){a(this).each(function(){var c=a(this);b.init(c)});return a(this)};a.fn.fswitchGet=function(){var c=a(this);var d=0;if(c.hasClass("f-active")){d=1}return d};a.fn.fswitchSet=function(d){var c=a(this);if(d!=1&&d!="1"){c.removeClass("f-active")}else{if(!c.hasClass("f-active")){c.addClass("f-active")}}}})(window.jQuery);(function(a,c){var b={init:function(h){if(!h.id){alert("设置下id信息!");return false}var d=a("#"+h.id);if(d.length==0){var e='<div class="f-actionsheet f-pop" id="'+h.id+'" data-page="'+c.pageid()+'"  ></div>';c.createMask();d=a(e);a("body").append(d);var i={};var f=c.guid();a.each(h.data,function(j,n){var k=a.extend({group:f,text:"按钮"+j,},n);i[k.group]=i[k.group]||a('<ul class="f-table"></ul>');var m="";if(!!k.mark){m='style="color:red;"'}var l='<li class="f-table-cell"><a data-event="'+j+'" '+m+' href="#">'+k.text+"</a></li>";i[k.group].append(l)});for(var g in i){d.append(i[g])}d.append('<ul class="f-table"><li class="f-table-cell"><a data-event="cancel" href="#">取消</a></li></ul>');d.on("tap","a",{op:h},function(k){var j=a(this);var n=k.data.op;var m=j.attr("data-event");var l=null;if(m=="cancel"){l=n.cancel}else{l=n.data[m].event}c.hideMask();a("#"+n.id).removeClass("active");if(!!l){setTimeout(function(){l()},300)}return false})}c.showMask();d.addClass("active")}};c.actionsheet=function(e){var d={id:"",data:[],cancel:false};a.extend(d,e||{});b.init(d)}})(window.jQuery,window.fui);(function(a,c){var b={init:function(g){var e=a("body");if(g.type!="toast"){if(a(".f-dialog").length>0){a(".f-dialog").remove();a(".f-dialog-mask").remove();return false}var f='<div class="f-dialog"></div><div class="f-dialog-mask"></div>';e.append(f);b[g.type](g);b.bindEvent(g);a(".f-dialog-mask").fadeIn();a(".f-dialog").show("fast",function(){a(this).addClass("active")})}else{var d=a('<div class="f-toast-container" ><div class="f-toast-message" >'+g.msg+"</div></div>");e.append(d);d.fadeIn(function(){var h=d;setTimeout(function(){h.fadeOut(function(){setTimeout(function(){h.remove();h=null},100)})},g.timeout);d.on("click",function(){var i=a(this);i.fadeOut(function(){i.remove();setTimeout(function(){i.remove();i=null},100)})});d=null})}},bindEvent:function(d){a(".f-dialog").on("tap",".f-dialog-btn",{op:d},function(h){var i=h.data.op;var f=a(this).attr("data-index");var g=a(".f-dialog input").val();a(".f-dialog-mask").fadeOut(function(){a(".f-dialog-mask").remove()});a(".f-dialog").fadeOut(function(){a(".f-dialog").remove()});if(!!i.callback){setTimeout(function(){i.callback(f,g)},300)}})},warning:function(g){var f=a(".f-dialog");var d=a('<div class="f-dialog-body" ><div class="f-dialog-title" >'+g.title+'</div><div class="f-dialog-text">'+g.msg+"</div></div>");var e=a('<div class="f-dialog-btns"><span data-index="0" class="f-dialog-btn f-dialog-btn-bold">'+g.btn+"</span></div>");f.append(d);f.append(e)},confirm:function(h){var f=a(".f-dialog");var d=a('<div class="f-dialog-body" ><div class="f-dialog-title" >'+h.title+'</div><div class="f-dialog-text">'+h.msg+"</div></div>");var e=a('<div class="f-dialog-btns"></div>');var g="";a.each(h.btns,function(i,j){g+='<span data-index="'+i+'" class="f-dialog-btn">'+j+"</span>"});e.html(g);f.append(d);f.append(e)},prompt:function(h){var f=a(".f-dialog");var d=a('<div class="f-dialog-body" ><div class="f-dialog-title" >'+h.title+'</div><div class="f-dialog-text">'+h.msg+'</div>            <div class="f-dialog-input" ><input type="text" placeholder="'+(h.input||"")+'"></div></div>');var e=a('<div class="f-dialog-btns"></div>');var g="";a.each(h.btns,function(i,j){g+='<span data-index="'+i+'" class="f-dialog-btn">'+j+"</span>"});e.html(g);f.append(d);f.append(e);f.find("input").focus()}};c.dialog=function(e){var d={type:"toast",title:"提示",msg:"",btn:"确定",timeout:2000,btns:["否","是"],callback:false};a.extend(d,e||{});b.init(d)};c.loading=function(f,g){if(f){var e="";if(!!g){e='<div class="f-load-msg" >'+(g||"")+"</div>"}var d=a('<div class="f-load-mask"></div><div class="f-load-container" ><div class="f-load-body" ><div style="margin-right:0px;" class="f-pull-loading f-spinner" ></div>            '+e+"</div></div>");a("body").append(d);d.fadeIn()}else{a(".f-load-mask").fadeOut(function(){a(this).remove()});a(".f-load-container").fadeOut(function(){a(this).remove()})}}})(window.jQuery,window.fui);(function(a,k,i){var e="f-scroll-wrapper";var d="f-scroll";var f="f-scrollbar";var c="f-scrollbar-indicator";var h=f+"-vertical";var g=f+"-horizontal";var b="f-active";var j={quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(n){return n*(2-n)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(n){return Math.sqrt(1-(--n*n))}},outCirc:{style:"cubic-bezier(0.075, 0.82, 0.165, 1)"},outCubic:{style:"cubic-bezier(0.165, 0.84, 0.44, 1)"}};var m=k.Class.extend({init:function(n,p){var o=a('<div class="'+d+'" ></div>');o.html(n.children());n.addClass(e);n.html(o);this.element=n[0];this.wrapper=this.element;this.scroller=this.wrapper.children[0];this.scrollerStyle=this.scroller&&this.scroller.style;this.stopped=false;this.options=a.extend(true,{scrollY:true,scrollX:false,startX:0,startY:0,indicators:true,stopPropagation:false,hardwareAccelerated:true,fixedBadAndorid:false,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|VIDEO)$/},momentum:true,snapX:0.5,snap:false,bounce:true,bounceTime:500,bounceEasing:j.outCirc,scrollTime:500,scrollEasing:j.outCubic,directionLockThreshold:5,},p);this.x=0;this.y=0;this.translateZ=this.options.hardwareAccelerated?" translateZ(0)":"";this._init();if(this.scroller){this.refresh();this.scrollTo(this.options.startX,this.options.startY)}},_init:function(){this._initIndicators();this._initEvent()},_initIndicators:function(){var q=this;q.indicators=[];if(!this.options.indicators){return}var p=[],o;if(q.options.scrollY){o={el:this._createScrollBar(h),listenX:false};this.wrapper.appendChild(o.el);p.push(o)}if(this.options.scrollX){o={el:this._createScrollBar(g),listenY:false};this.wrapper.appendChild(o.el);p.push(o)}for(var n=p.length;n--;){this.indicators.push(new l(this,p[n]))}},_initSnap:function(){this.currentPage={};this.pages=[];var y=this.snaps;var q=y.length;var r=0;var s=-1;var A=0;var p=0;var v=0;var z=0;for(var o=0;o<q;o++){var w=y[o];var t=w.offsetLeft;var u=w.offsetWidth;if(o===0||t<=y[o-1].offsetLeft){r=0;s++}if(!this.pages[r]){this.pages[r]=[]}A=this._getSnapX(t);z=Math.round((u)*this.options.snapX);p=A-z;v=A-u+z;this.pages[r][s]={x:A,leftX:p,rightX:v,pageX:r,element:w};if(w.classList.contains(b)){this.currentPage=this.pages[r][0]}if(A>=this.maxScrollX){r++}}this.options.startX=this.currentPage.x||0},_getSnapX:function(n){return Math.max(Math.min(0,-n+(this.wrapperWidth/2)),this.maxScrollX)},_gotoPage:function(o){this.currentPage=this.pages[Math.min(o,this.pages.length-1)][0];for(var n=0,p=this.snaps.length;n<p;n++){if(n===o){this.snaps[n].classList.add(b)}else{this.snaps[n].classList.remove(b)}}this.scrollTo(this.currentPage.x,0,this.options.scrollTime)},_nearestSnap:function(q){if(!this.pages.length){return{x:0,pageX:0}}var n=0;var o=this.pages.length;if(q>0){q=0}else{if(q<this.maxScrollX){q=this.maxScrollX}}for(;n<o;n++){var p=this.direction==="left"?this.pages[n][0].leftX:this.pages[n][0].rightX;if(q>=p){return this.pages[n][0]}}return{x:0,pageX:0}},_initEvent:function(o){var n=o?"removeEventListener":"addEventListener";window[n]("orientationchange",this);window[n]("resize",this);this.scroller[n]("webkitTransitionEnd",this);this.wrapper[n](k.event.start,this);this.wrapper[n](k.event.cancel,this);this.wrapper[n](k.event.end,this);this.wrapper[n]("drag",this);this.wrapper[n]("dragend",this);this.wrapper[n]("flick",this);this.wrapper[n]("scrollend",this);if(this.options.scrollX){this.wrapper[n]("swiperight",this)}this.wrapper[n]("scrollstart",this);this.wrapper[n]("refresh",this)},_handleIndicatorScrollend:function(){this.indicators.map(function(n){n.fade()})},_handleIndicatorScrollstart:function(){this.indicators.map(function(n){n.fade(1)})},_handleIndicatorRefresh:function(){this.indicators.map(function(n){n.refresh()})},handleEvent:function(n){if(this.stopped){this.resetPosition();return}switch(n.type){case k.event.start:this._start(n);break;case"drag":this.options.stopPropagation&&n.stopPropagation();this._drag(n);break;case"dragend":case"flick":this.options.stopPropagation&&n.stopPropagation();this._flick(n);break;case k.event.cancel:case k.event.end:this._end(n);break;case"webkitTransitionEnd":this.transitionTimer&&this.transitionTimer.cancel();this._transitionEnd(n);break;case"scrollstart":this._handleIndicatorScrollstart(n);break;case"scrollend":this._handleIndicatorScrollend(n);this._scrollend(n);n.stopPropagation();break;case"orientationchange":case"resize":this._resize();break;case"swiperight":n.stopPropagation();break;case"refresh":this._handleIndicatorRefresh(n);break}},_start:function(n){this.moved=this.needReset=false;this._transitionTime();if(this.isInTransition){this.needReset=true;this.isInTransition=false;var o=k.parseTranslateMatrix(k.getStyles(this.scroller,"webkitTransform"));this.setTranslate(Math.round(o.x),Math.round(o.y));k.trigger(this.scroller,"scrollend",this);k.preventDefault(n)}this.reLayout();k.trigger(this.scroller,"beforescrollstart",this)},_getDirectionByAngle:function(n){if(n<-80&&n>-100){return"up"}else{if(n>=80&&n<100){return"down"}else{if(n>=170||n<=-170){return"left"}else{if(n>=-35&&n<=10){return"right"}}}}return null},_drag:function(t){var r=t.detail;var u=false;var v=false;var s=this._getDirectionByAngle(r.angle);if(r.direction==="left"||r.direction==="right"){if(this.options.scrollX){u=true;if(!this.moved){k.gestures.session.lockDirection=true;k.gestures.session.startDirection=r.direction}}else{if(this.options.scrollY&&!this.moved){v=true}}}else{if(r.direction==="up"||r.direction==="down"){if(this.options.scrollY){u=true;if(!this.moved){k.gestures.session.lockDirection=true;k.gestures.session.startDirection=r.direction}}else{if(this.options.scrollX&&!this.moved){v=true}}}else{v=true}}if(this.moved||u){t.stopPropagation();r.gesture&&r.gesture.preventDefault()}if(v){return}if(!this.moved){k.trigger(this.scroller,"scrollstart",this)}else{t.stopPropagation()}var p=0;var q=0;if(!this.moved){p=r.deltaX;q=r.deltaY}else{p=r.deltaX-k.gestures.session.prevTouch.deltaX;q=r.deltaY-k.gestures.session.prevTouch.deltaY}var n=Math.abs(r.deltaX);var o=Math.abs(r.deltaY);if(n>o+this.options.directionLockThreshold){q=0}else{if(o>=n+this.options.directionLockThreshold){p=0}}p=this.hasHorizontalScroll?p:0;q=this.hasVerticalScroll?q:0;var w=this.x+p;var x=this.y+q;if(w>0||w<this.maxScrollX){w=this.options.bounce?this.x+p/3:w>0?0:this.maxScrollX}if(x>0||x<this.maxScrollY){x=this.options.bounce?this.y+q/3:x>0?0:this.maxScrollY}if(!this.requestAnimationFrame){this._updateTranslate()}this.direction=r.deltaX>0?"right":"left";this.moved=true;this.x=w;this.y=x;k.trigger(this.scroller,"scroll",this)},_flick:function(o){if(!this.moved){return}o.stopPropagation();var n=o.detail;this._clearRequestAnimationFrame();if(o.type==="dragend"&&n.flick){return}var s=Math.round(this.x);var t=Math.round(this.y);this.isInTransition=false;if(this.resetPosition(this.options.bounceTime)){return}this.scrollTo(s,t);if(o.type==="dragend"){k.trigger(this.scroller,"scrollend",this);return}var u=0;var p="";if(this.options.momentum&&n.flickTime<300){var q=this.hasHorizontalScroll?this._momentum(this.x,n.flickDistanceX,n.flickTime,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:s,duration:0};var r=this.hasVerticalScroll?this._momentum(this.y,n.flickDistanceY,n.flickTime,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:t,duration:0};s=q.destination;t=r.destination;u=Math.max(q.duration,r.duration);this.isInTransition=true}if(s!=this.x||t!=this.y){if(s>0||s<this.maxScrollX||t>0||t<this.maxScrollY){p=j.quadratic}this.scrollTo(s,t,u,p);return}k.trigger(this.scroller,"scrollend",this)},_end:function(n){this.needReset=false;if((!this.moved&&this.needReset)||n.type===k.event.cancel){this.resetPosition()}},_transitionEnd:function(n){if(n.target!=this.scroller||!this.isInTransition){return}this._transitionTime();if(!this.resetPosition(this.options.bounceTime)){this.isInTransition=false;k.trigger(this.scroller,"scrollend",this)}},_scrollend:function(n){if((this.y===0&&this.maxScrollY===0)||(Math.abs(this.y)>0&&this.y<=this.maxScrollY)){k.trigger(this.scroller,"scrollbottom",this)}},_resize:function(){var n=this;clearTimeout(n.resizeTimeout);n.resizeTimeout=setTimeout(function(){n.refresh()},n.options.resizePolling)},_transitionTime:function(o){o=o||0;this.scrollerStyle.webkitTransitionDuration=o+"ms";if(this.indicators){for(var n=this.indicators.length;n--;){this.indicators[n].transitionTime(o)}}if(o){this.transitionTimer&&this.transitionTimer.cancel();this.transitionTimer=k.later(function(){k.trigger(this.scroller,"webkitTransitionEnd")},o+100,this)}},_transitionTimingFunction:function(n){this.scrollerStyle.webkitTransitionTimingFunction=n;if(this.indicators){for(var o=this.indicators.length;o--;){this.indicators[o].transitionTimingFunction(n)}}},_translate:function(n,o){this.x=n;this.y=o},_clearRequestAnimationFrame:function(){if(this.requestAnimationFrame){cancelAnimationFrame(this.requestAnimationFrame);this.requestAnimationFrame=null}},_updateTranslate:function(){var n=this;if(n.x!==n.lastX||n.y!==n.lastY){n.setTranslate(n.x,n.y)}n.requestAnimationFrame=requestAnimationFrame(function(){n._updateTranslate()})},_createScrollBar:function(n){var p=i.createElement("div");var o=i.createElement("div");p.className=f+" "+n;o.className=c;p.appendChild(o);if(n===h){this.scrollbarY=p;this.scrollbarIndicatorY=o}else{if(n===g){this.scrollbarX=p;this.scrollbarIndicatorX=o}}this.wrapper.appendChild(p);return p},_preventDefaultException:function(n,o){for(var p in o){if(o[p].test(n[p])){return true}}return false},_reLayout:function(){if(!this.hasHorizontalScroll){this.maxScrollX=0;this.scrollerWidth=this.wrapperWidth}if(!this.hasVerticalScroll){this.maxScrollY=0;this.scrollerHeight=this.wrapperHeight}this.indicators.map(function(r){r.refresh()});if(this.options.snap&&typeof this.options.snap==="string"){var p=this.scroller.querySelectorAll(this.options.snap);this.itemLength=0;this.snaps=[];for(var n=0,q=p.length;n<q;n++){var o=p[n];if(o.parentNode===this.scroller){this.itemLength++;this.snaps.push(o)}}this._initSnap()}},_momentum:function(n,q,u,s,v,o){var t=parseFloat(Math.abs(q)/u),p,r;o=o===undefined?0.0006:o;p=n+(t*t)/(2*o)*(q<0?-1:1);r=t/o;if(p<s){p=v?s-(v/2.5*(t/8)):s;q=Math.abs(p-n);r=q/t}else{if(p>0){p=v?v/2.5*(t/8):0;q=Math.abs(n)+p;r=q/t}}return{destination:Math.round(p),duration:r}},_getTranslateStr:function(n,o){if(this.options.hardwareAccelerated){return"translate3d("+n+"px,"+o+"px,0px) "+this.translateZ}return"translate("+n+"px,"+o+"px) "},setStopped:function(n){this.stopped=!!n},setTranslate:function(o,p){this.x=o;this.y=p;this.scrollerStyle.webkitTransform=this._getTranslateStr(o,p);if(this.indicators){for(var n=this.indicators.length;n--;){this.indicators[n].updatePosition()}}this.lastX=this.x;this.lastY=this.y;k.trigger(this.scroller,"scroll",this)},reLayout:function(){this.wrapper.offsetHeight;var q=parseFloat(k.getStyles(this.wrapper,"padding-left"))||0;var r=parseFloat(k.getStyles(this.wrapper,"padding-right"))||0;var s=parseFloat(k.getStyles(this.wrapper,"padding-top"))||0;var p=parseFloat(k.getStyles(this.wrapper,"padding-bottom"))||0;var o=this.wrapper.clientWidth;var n=this.wrapper.clientHeight;this.scrollerWidth=this.scroller.offsetWidth;this.scrollerHeight=this.scroller.offsetHeight;this.wrapperWidth=o-q-r;this.wrapperHeight=n-s-p;this.maxScrollX=Math.min(this.wrapperWidth-this.scrollerWidth,0);this.maxScrollY=Math.min(this.wrapperHeight-this.scrollerHeight,0);this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0;this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0;this._reLayout()},resetPosition:function(n){var o=this.x,p=this.y;n=n||0;if(!this.hasHorizontalScroll||this.x>0){o=0}else{if(this.x<this.maxScrollX){o=this.maxScrollX}}if(!this.hasVerticalScroll||this.y>0){p=0}else{if(this.y<this.maxScrollY){p=this.maxScrollY}}if(o==this.x&&p==this.y){return false}this.scrollTo(o,p,n,this.options.scrollEasing);return true},_reInit:function(){var n=this.wrapper.querySelectorAll("."+d);for(var o=0,p=n.length;o<p;o++){if(n[o].parentNode===this.wrapper){this.scroller=n[o];break}}this.scrollerStyle=this.scroller&&this.scroller.style},refresh:function(){this._reInit();this.reLayout();k.trigger(this.scroller,"refresh",this);this.resetPosition()},scrollTo:function(p,q,o,n){var n=n||j.circular;this.isInTransition=o>0;if(this.isInTransition){this._clearRequestAnimationFrame();this._transitionTimingFunction(n.style);this._transitionTime(o);this.setTranslate(p,q)}else{this.setTranslate(p,q)}},scrollToBottom:function(o,n){o=o||this.options.scrollTime;this.scrollTo(0,this.maxScrollY,o,n)},gotoPage:function(n){this._gotoPage(n)},destroy:function(){this._initEvent(true);this.wrapper.setAttribute("data-scroll","")}});var l=function(o,n){this.wrapper=typeof n.el=="string"?i.querySelector(n.el):n.el;this.wrapperStyle=this.wrapper.style;this.indicator=this.wrapper.children[0];this.indicatorStyle=this.indicator.style;this.scroller=o;this.options=a.extend({listenX:true,listenY:true,fade:false,speedRatioX:0,speedRatioY:0},n);this.sizeRatioX=1;this.sizeRatioY=1;this.maxPosX=0;this.maxPosY=0;if(this.options.fade){this.wrapperStyle.webkitTransform=this.scroller.translateZ;this.wrapperStyle.webkitTransitionDuration="0ms";this.wrapperStyle.opacity="0"}};l.prototype={handleEvent:function(n){},transitionTime:function(n){n=n||0;this.indicatorStyle.webkitTransitionDuration=n+"ms"},transitionTimingFunction:function(n){this.indicatorStyle.webkitTransitionTimingFunction=n},refresh:function(){this.transitionTime();if(this.options.listenX&&!this.options.listenY){this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none"}else{if(this.options.listenY&&!this.options.listenX){this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none"}else{this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none"}}this.wrapper.offsetHeight;if(this.options.listenX){this.wrapperWidth=this.wrapper.clientWidth;this.indicatorWidth=Math.max(Math.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8);this.indicatorStyle.width=this.indicatorWidth+"px";this.maxPosX=this.wrapperWidth-this.indicatorWidth;this.minBoundaryX=0;this.maxBoundaryX=this.maxPosX;this.sizeRatioX=this.options.speedRatioX||(this.scroller.maxScrollX&&(this.maxPosX/this.scroller.maxScrollX))}if(this.options.listenY){this.wrapperHeight=this.wrapper.clientHeight;this.indicatorHeight=Math.max(Math.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8);this.indicatorStyle.height=this.indicatorHeight+"px";this.maxPosY=this.wrapperHeight-this.indicatorHeight;this.minBoundaryY=0;this.maxBoundaryY=this.maxPosY;this.sizeRatioY=this.options.speedRatioY||(this.scroller.maxScrollY&&(this.maxPosY/this.scroller.maxScrollY))}this.updatePosition()},updatePosition:function(){var n=this.options.listenX&&Math.round(this.sizeRatioX*this.scroller.x)||0,o=this.options.listenY&&Math.round(this.sizeRatioY*this.scroller.y)||0;if(n<this.minBoundaryX){this.width=Math.max(this.indicatorWidth+n,8);this.indicatorStyle.width=this.width+"px";n=this.minBoundaryX}else{if(n>this.maxBoundaryX){this.width=Math.max(this.indicatorWidth-(n-this.maxPosX),8);this.indicatorStyle.width=this.width+"px";n=this.maxPosX+this.indicatorWidth-this.width}else{if(this.width!=this.indicatorWidth){this.width=this.indicatorWidth;this.indicatorStyle.width=this.width+"px"}}}if(o<this.minBoundaryY){this.height=Math.max(this.indicatorHeight+o*3,8);this.indicatorStyle.height=this.height+"px";o=this.minBoundaryY}else{if(o>this.maxBoundaryY){this.height=Math.max(this.indicatorHeight-(o-this.maxPosY)*3,8);this.indicatorStyle.height=this.height+"px";o=this.maxPosY+this.indicatorHeight-this.height}else{if(this.height!=this.indicatorHeight){this.height=this.indicatorHeight;this.indicatorStyle.height=this.height+"px"}}}this.x=n;this.y=o;this.indicatorStyle.webkitTransform=this.scroller._getTranslateStr(n,o)},fade:function(q,o){if(o&&!this.visible){return}clearTimeout(this.fadeTimeout);this.fadeTimeout=null;var p=q?250:500,n=q?0:300;q=q?"1":"0";this.wrapperStyle.webkitTransitionDuration=p+"ms";this.fadeTimeout=setTimeout((function(r){this.wrapperStyle.opacity=r;this.visible=+r}).bind(this,q),n)}};k.Scroll=m;a.fn.scroll=function(n){return new m(a(this),n)}})(window.jQuery,window.fui,document);(function(a,t,s){var p="f-pull-top-pocket";var j="f-pull-bottom-pocket";var i="f-pull";var o="f-pull-loading";var k="f-pull-caption";var l="f-pull-caption-down";var n="f-pull-caption-refresh";var m="f-pull-caption-nomore";var d="f-icon";var q="f-spinner";var e="f-icon-pulldown";var b="f-block";var c="f-hidden";var r="f-visibility";var h=o+" "+d+" "+e;var g=o+" "+d+" "+e;var f=o+" "+d+" "+q;var u=['<div class="'+i+'">','<div class="{icon}"></div>','<div class="'+k+'">{contentrefresh}</div>',"</div>"].join("");var v={init:function(w,x){this._super(w,a.extend(true,{scrollY:true,scrollX:false,indicators:true,deceleration:0.003,down:{height:50,contentinit:"下拉可以刷新",contentdown:"下拉可以刷新",contentover:"释放立即刷新",contentrefresh:"正在刷新..."},up:{height:50,auto:false,contentinit:"上拉显示更多",contentdown:"上拉显示更多",contentrefresh:"正在加载...",contentnomore:"没有更多数据了",duration:300}},x))},_init:function(){this._super();this._initPocket()},_initPulldownRefresh:function(){this.pulldown=true;if(this.topPocket){this.pullPocket=this.topPocket;this.pullPocket.classList.add(b);this.pullPocket.classList.add(r);this.pullCaption=this.topCaption;this.pullLoading=this.topLoading}},_initPullupRefresh:function(){this.pulldown=false;if(this.bottomPocket){this.pullPocket=this.bottomPocket;this.pullPocket.classList.add(b);this.pullPocket.classList.add(r);this.pullCaption=this.bottomCaption;this.pullLoading=this.bottomLoading}},_initPocket:function(){var w=this.options;if(w.down&&w.down.hasOwnProperty("callback")){this.topPocket=this.scroller.querySelector("."+p);if(!this.topPocket){this.topPocket=this._createPocket(p,w.down,g);this.wrapper.insertBefore(this.topPocket,this.wrapper.firstChild)}this.topLoading=this.topPocket.querySelector("."+o);this.topCaption=this.topPocket.querySelector("."+k)}if(w.up&&w.up.hasOwnProperty("callback")){this.bottomPocket=this.scroller.querySelector("."+j);if(!this.bottomPocket){this.bottomPocket=this._createPocket(j,w.up,f);this.scroller.appendChild(this.bottomPocket)}this.bottomLoading=this.bottomPocket.querySelector("."+o);this.bottomCaption=this.bottomPocket.querySelector("."+k);this.wrapper.addEventListener("scrollbottom",this)}},_createPocket:function(w,y,x){var z=s.createElement("div");z.className=w;z.innerHTML=u.replace("{contentrefresh}",y.contentinit).replace("{icon}",x);return z},_resetPullDownLoading:function(){var w=this.pullLoading;if(w){this.pullCaption.innerHTML=this.options.down.contentdown;w.style.webkitTransition="";w.style.webkitTransform="";w.style.webkitAnimation="";w.className=g}},_setCaptionClass:function(x,w,y){if(!x){switch(y){case this.options.up.contentdown:w.className=k+" "+l;break;case this.options.up.contentrefresh:w.className=k+" "+n;break;case this.options.up.contentnomore:w.className=k+" "+m;break}}},_setCaption:function(D,B){if(this.loading){return}var z=this.options;var A=this.pullPocket;var w=this.pullCaption;var y=this.pullLoading;var x=this.pulldown;var C=this;if(A){if(B){setTimeout(function(){w.innerHTML=C.lastTitle=D;if(x){y.className=g}else{C._setCaptionClass(false,w,D);y.className=f}y.style.webkitAnimation="";y.style.webkitTransition="";y.style.webkitTransform=""},100)}else{if(D!==this.lastTitle){w.innerHTML=D;if(x){if(D===z.down.contentrefresh){y.className=f;y.style.webkitAnimation="spinner-spin 1s step-end infinite"}else{if(D===z.down.contentover){y.className=h;y.style.webkitTransition="-webkit-transform 0.3s ease-in";y.style.webkitTransform="rotate(180deg)"}else{if(D===z.down.contentdown){y.className=g;y.style.webkitTransition="-webkit-transform 0.3s ease-in";y.style.webkitTransform="rotate(0deg)"}}}}else{if(D===z.up.contentrefresh){y.className=f+" "+r}else{y.className=f+" "+c}C._setCaptionClass(false,w,D)}this.lastTitle=D}}}}};t.PullRefresh=v})(window.jQuery,window.fui,document);(function(a,e,h,d,g){var c="f-visibility";var b="f-hidden";var f=e.Scroll.extend(a.extend({handleEvent:function(i){this._super(i);if(i.type==="scrollbottom"){if(i.target===this.scroller){this._scrollbottom()}}},_scrollbottom:function(){if(!this.pulldown&&!this.loading){this.pulldown=false;this._initPullupRefresh();this.pullupLoading()}},_start:function(i){if(i.touches&&i.touches.length&&i.touches[0].clientX>30){i.target&&!this._preventDefaultException(i.target,this.options.preventDefaultException)&&e.preventDefault(i)}if(!this.loading){this.pulldown=this.pullPocket=this.pullCaption=this.pullLoading=false}this._super(i)},_drag:function(i){this._super(i);if(!this.pulldown&&!this.loading&&this.topPocket&&i.detail.direction==="down"&&this.y>=0){this._initPulldownRefresh()}if(this.pulldown){this._setCaption(this.y>this.options.down.height?this.options.down.contentover:this.options.down.contentdown)}},_reLayout:function(){this.hasVerticalScroll=true;this._super()},resetPosition:function(i){if(this.pulldown){if(this.y>=this.options.down.height){this.pulldownLoading(g,i||0);return true}else{!this.loading&&this.topPocket.classList.remove(c)}}return this._super(i)},pulldownLoading:function(k,j){typeof k==="undefined"&&(k=this.options.down.height);this.scrollTo(0,k,j,this.options.bounceEasing);if(this.loading){return}this._initPulldownRefresh();this._setCaption(this.options.down.contentrefresh);this.loading=true;this.indicators.map(function(l){l.fade(0)});var i=this.options.down.callback;i&&i.call(this)},endPulldownToRefresh:function(){var i=this;if(i.topPocket&&i.loading&&this.pulldown){i.scrollTo(0,0,i.options.bounceTime,i.options.bounceEasing);i.loading=false;i._setCaption(i.options.down.contentdown,true);setTimeout(function(){i.loading||i.topPocket.classList.remove(c)},350)}},pullupLoading:function(i,k,j){k=k||0;this.scrollTo(k,this.maxScrollY,j,this.options.bounceEasing);if(this.loading){return}this._initPullupRefresh();this._setCaption(this.options.up.contentrefresh);this.indicators.map(function(l){l.fade(0)});this.loading=true;i=i||this.options.up.callback;i&&i.call(this)},endPullupToRefresh:function(i){var j=this;if(j.bottomPocket){j.loading=false;if(i){this.finished=true;j._setCaption(j.options.up.contentnomore);j.wrapper.removeEventListener("scrollbottom",j)}else{j._setCaption(j.options.up.contentdown);j.loading||j.bottomPocket.classList.remove(c)}}},disablePullupToRefresh:function(){this._initPullupRefresh();this.bottomPocket.className="f-pull-bottom-pocket "+b;this.wrapper.removeEventListener("scrollbottom",this)},enablePullupToRefresh:function(){var i=this.pulldown;this._initPullupRefresh();this.bottomPocket.classList.remove(b);this._setCaption(this.options.up.contentdown);if(i){this.pulldown=true;this.bottomPocket.classList.remove(c)}this.wrapper.addEventListener("scrollbottom",this)},refresh:function(i){if(i&&this.finished){this.enablePullupToRefresh();this.finished=false}this._super()},},e.PullRefresh));a.fn.pullRefresh=function(i){return new f(a(this),i)}})(window.jQuery,window.fui,window,document);(function(a,k,q,j,p){var e="f-slider";var f="f-slider-group";var i="f-slider-loop";var g="f-slider-indicator";var c="f-action-previous";var b="f-action-next";var h="f-slider-item";var d="f-active";var m="."+h;var l="."+g;var n=".f-slider-progress-bar";var o=k.Scroll.extend({init:function(r,v){v=v||{};r.addClass(e);var s=a('<div class="f-slider-group" ></div>');r.append(s);var w=this;if(v.loop==p){w.loop=true}if(!!v.indicator){w.$indicator=a('<div class="'+g+'" ></div>');r.append(w.$indicator)}var t=v.data||[];var u=t.length;if(u==0){return}else{if(u==1){s.append('<div class="'+h+'"><div><img src="'+t[0]+'"></div></div>')}else{if(w.loop){s.append('<div class="'+h+' f-slider-item-duplicate"><div><img src="'+t[u-1]+'"></div></div>')}a.each(t,function(x,y){if(!!v.indicator){w.$indicator.append('<div class="f-indicator '+(x==0?d:"")+'" ></div>')}s.append('<div class="'+h+" "+(x==0?d:"")+' "><div><img src="'+y+'"></div></div>')});if(w.loop){s.append('<div class="'+h+' f-slider-item-duplicate"><div><img src="'+t[0]+'"></div></div>')}}}this._super(s,a.extend(true,{fingers:1,interval:0,scrollY:false,scrollX:true,indicators:false,scrollTime:1000,startX:false,slideTime:0,snap:m},v));this.options.gotonum!=p&&this.options.gotonum>0&&this.gotoItem(this.options.gotonum,0)},_init:function(){this._reInit();if(this.scroller){this.scrollerStyle=this.scroller.style;this.progressBar=this.wrapper.querySelector(n);if(this.progressBar){this.progressBarWidth=this.progressBar.offsetWidth;this.progressBarStyle=this.progressBar.style}this._super();this._initTimer()}},_triggerSlide:function(){var s=this;s.isInTransition=false;var r=s.currentPage;s.slideNumber=s._fixedSlideNumber();if(s.loop&&s.itemLength>1){if(s.slideNumber===0){s.setTranslate(s.pages[1][0].x,0)}else{if(s.slideNumber===s.itemLength-3){s.setTranslate(s.pages[s.itemLength-2][0].x,0)}}}if(s.lastSlideNumber!=s.slideNumber){s.lastSlideNumber=s.slideNumber;s.lastPage=s.currentPage;k.trigger(s.wrapper,"slide",{slideNumber:s.slideNumber})}s._initTimer()},_handleSlide:function(u){var C=this;if(u.target!==C.wrapper){return}var t=u.detail;t.slideNumber=t.slideNumber||0;var D=C.scroller.querySelectorAll(m);var z=[];for(var v=0,A=D.length;v<A;v++){var y=D[v];if(y.parentNode===C.scroller){z.push(y)}}var r=t.slideNumber;if(C.loop){r+=1}if(!C.wrapper.classList.contains("f-segmented-control")){for(var v=0,A=z.length;v<A;v++){var y=z[v];if(y.parentNode===C.scroller){if(v===r){y.classList.add(d)}else{y.classList.remove(d)}}}}var x=C.wrapper.parentNode.querySelector(".f-slider-indicator");if(x){if(x.getAttribute("data-scroll")){a(x).scroll().gotoPage(t.slideNumber)}var w=x.querySelectorAll(".f-indicator");if(w.length>0){for(var v=0,A=w.length;v<A;v++){w[v].classList[v===t.slideNumber?"add":"remove"](d)}}else{var B=x.querySelector(".f-number span");if(B){B.innerText=(t.slideNumber+1)}else{var s=x.querySelectorAll(".f-control-item");for(var v=0,A=s.length;v<A;v++){s[v].classList[v===t.slideNumber?"add":"remove"](d)}}}}u.stopPropagation()},_handleTabShow:function(r){var s=this;s.gotoItem((r.detail.tabNumber||0),s.options.slideTime)},_handleIndicatorTap:function(r){var s=this;var t=r.target;if(t.classList.contains(c)||t.classList.contains(b)){s[t.classList.contains(c)?"prevItem":"nextItem"]();r.stopPropagation()}},_initEvent:function(s){var t=this;t._super(s);var r=s?"removeEventListener":"addEventListener";t.wrapper[r]("slide",this);t.wrapper[r]("show.f.tab",this)},handleEvent:function(r){this._super(r);switch(r.type){case"slide":this._handleSlide(r);break;case"show.f.tab":if(~this.snaps.indexOf(r.target)){this._handleTabShow(r)}break}},_scrollend:function(r){this._super(r);this._triggerSlide(r)},_drag:function(s){this._super(s);var r=s.detail.direction;if(r==="left"||r==="right"){var t=this.wrapper.getAttribute("data-slidershowTimer");t&&q.clearTimeout(t);s.stopPropagation()}},_initTimer:function(){var s=this;var t=s.wrapper;var r=s.options.interval;var u=t.getAttribute("data-slidershowTimer");u&&q.clearTimeout(u);if(r){u=q.setTimeout(function(){if(!t){return}if(!!(t.offsetWidth||t.offsetHeight)){s.nextItem(true)}s._initTimer()},r);t.setAttribute("data-slidershowTimer",u)}},_fixedSlideNumber:function(r){r=r||this.currentPage;var s=r.pageX;if(this.loop){if(r.pageX===0){s=this.itemLength-3}else{if(r.pageX===(this.itemLength-1)){s=0}else{s=r.pageX-1}}}return s},_reLayout:function(){this.hasHorizontalScroll=true;this._super()},_getScroll:function(){var r=a.parseTranslateMatrix(a.getStyles(this.scroller,"webkitTransform"));return r?r.x:0},_transitionEnd:function(r){if(r.target!==this.scroller||!this.isInTransition){return}this._transitionTime();this.isInTransition=false;k.trigger(this.wrapper,"scrollend",this)},_flick:function(t){if(!this.moved){return}var r=t.detail;var s=r.direction;this._clearRequestAnimationFrame();this.isInTransition=true;if(t.type==="flick"){if(r.deltaTime<200){this.x=this._getPage((this.slideNumber+(s==="right"?-1:1)),true).x}this.resetPosition(this.options.bounceTime)}else{if(t.type==="dragend"&&!r.flick){this.resetPosition(this.options.bounceTime)}}t.stopPropagation()},_initSnap:function(){this.scrollerWidth=this.itemLength*this.scrollerWidth;this.maxScrollX=Math.min(this.wrapperWidth-this.scrollerWidth,0);this._super();if(!this.currentPage.x){var r=this.pages[this.loop?1:0];r=r||this.pages[0];if(!r){return}this.currentPage=r[0];this.slideNumber=0;this.lastSlideNumber=typeof this.lastSlideNumber==="undefined"?0:this.lastSlideNumber}else{this.slideNumber=this._fixedSlideNumber();this.lastSlideNumber=typeof this.lastSlideNumber==="undefined"?this.slideNumber:this.lastSlideNumber}this.options.startX=this.currentPage.x||0},_getSnapX:function(r){return Math.max(-r,this.maxScrollX)},_getPage:function(s,r){if(this.loop){if(s>(this.itemLength-(r?2:3))){s=1;time=0}else{if(s<(r?-1:0)){s=this.itemLength-2;time=0}else{s+=1}}}else{if(!r){if(s>(this.itemLength-1)){s=0;time=0}else{if(s<0){s=this.itemLength-1;time=0}}}s=Math.min(Math.max(0,s),this.itemLength-1)}if(s<0){s=0}if(this.itemLength==1){return this.pages[0][0]}return this.pages[s][0]},_gotoItem:function(r,s){this.currentPage=this._getPage(r,true);this.scrollTo(this.currentPage.x,0,s,this.options.scrollEasing);if(s===0){k.trigger(this.wrapper,"scrollend",this)}},setTranslate:function(s,t){this._super(s,t);var r=this.progressBar;if(r){this.progressBarStyle.webkitTransform=this._getTranslateStr((-s*(this.progressBarWidth/this.wrapperWidth)),0)}},resetPosition:function(r){r=r||0;if(this.x>0){this.x=0}else{if(this.x<this.maxScrollX){this.x=this.maxScrollX}}this.currentPage=this._nearestSnap(this.x);this.scrollTo(this.currentPage.x,0,r,this.options.scrollEasing);return true},gotoItem:function(r,s){this._gotoItem(r,typeof s==="undefined"?this.options.scrollTime:s)},nextItem:function(){this._gotoItem(this.slideNumber+1,this.options.scrollTime)},prevItem:function(){this._gotoItem(this.slideNumber-1,this.options.scrollTime)},getSlideNumber:function(){return this.slideNumber||0},_reInit:function(){var r=this.wrapper.querySelectorAll("."+f);for(var s=0,t=r.length;s<t;s++){if(r[s].parentNode===this.wrapper){this.scroller=r[s];break}}this.scrollerStyle=this.scroller&&this.scroller.style;if(this.progressBar){this.progressBarWidth=this.progressBar.offsetWidth;this.progressBarStyle=this.progressBar.style}},refresh:function(r){if(r){a.extend(this.options,r);this._super();this._initTimer()}else{this._super()}},destroy:function(){this._initEvent(true);this.wrapper.setAttribute("data-slider","")}});a.fn.slider=function(r){return new o(a(this),r)}})(window.jQuery,window.fui,window,document);(function(a,h,d){var b="f-zoom";var c="f-zoom-scroller";var i="."+b;var j="."+c;var g="pinchstart";var e="pinch";var f="pinchend";if("ongesturestart" in window){g="gesturestart";e="gesturechange";f="gestureend"}a.Zoom=function(l,C){var L=this;L.options=a.extend(a.Zoom.defaults,C);L.wrapper=L.element=l;L.scroller=l.querySelector(j);L.scrollerStyle=L.scroller&&L.scroller.style;L.zoomer=l.querySelector(i);L.zoomerStyle=L.zoomer&&L.zoomer.style;L.init=function(){h.options.gestureConfig.pinch=true;h.options.gestureConfig.doubletap=true;L.initEvents()};L.initEvents=function(N){var M=N?"removeEventListener":"addEventListener";var O=L.scroller;O[M](g,L.onPinchstart);O[M](e,L.onPinch);O[M](f,L.onPinchend);O[M](h.event.start,L.onTouchstart);O[M](h.event.move,L.onTouchMove);O[M](h.event.cancel,L.onTouchEnd);O[M](h.event.end,L.onTouchEnd);O[M]("drag",L.dragEvent);O[M]("doubletap",L.doubleTapEvent)};L.dragEvent=function(M){if(p||A){M.stopPropagation()}};L.doubleTapEvent=function(M){L.toggleZoom(M.detail.center)};L.transition=function(M,N){N=N||0;M.webkitTransitionDuration=N+"ms";return L};L.translate=function(M,N,O){N=N||0;O=O||0;M.webkitTransform="translate3d("+N+"px,"+O+"px,0px)";return L};L.scale=function(N,M){M=M||1;N.webkitTransform="translate3d(0,0,0) scale("+M+")";return L};L.scrollerTransition=function(M){return L.transition(L.scrollerStyle,M)};L.scrollerTransform=function(M,N){return L.translate(L.scrollerStyle,M,N)};L.zoomerTransition=function(M){return L.transition(L.zoomerStyle,M)};L.zoomerTransform=function(M){return L.scale(L.zoomerStyle,M)};var D=1,k=1,B=false,A=false;L.onPinchstart=function(M){A=true};L.onPinch=function(M){if(!B){L.zoomerTransition(0);B=true}D=(M.detail?M.detail.scale:M.scale)*k;if(D>L.options.maxZoom){D=L.options.maxZoom-1+Math.pow((D-L.options.maxZoom+1),0.5)}if(D<L.options.minZoom){D=L.options.minZoom+1-Math.pow((L.options.minZoom-D+1),0.5)}L.zoomerTransform(D)};L.onPinchend=function(M){D=Math.max(Math.min(D,L.options.maxZoom),L.options.minZoom);L.zoomerTransition(L.options.speed).zoomerTransform(D);k=D;B=false};L.setZoom=function(M){D=k=M;L.scrollerTransition(L.options.speed).scrollerTransform(0,0);L.zoomerTransition(L.options.speed).zoomerTransform(D)};L.toggleZoom=function(Q,R){if(typeof Q==="number"){R=Q;Q=undefined}R=typeof R==="undefined"?L.options.speed:R;if(D&&D!==1){D=k=1;L.scrollerTransition(R).scrollerTransform(0,0)}else{D=k=L.options.maxZoom;if(Q){var N=h.offset(L.zoomer);var S=N.top;var M=N.left;var O=(Q.x-M)*D;var P=(Q.y-S)*D;this._cal();if(O>=r&&O<=(r+K)){O=r-O+K/2}else{if(O<r){O=r-O+K/2}else{if(O>(r+K)){O=r+K-O-K/2}}}if(P>=s&&P<=(s+J)){P=s-P+J/2}else{if(P<s){P=s-P+J/2}else{if(P>(s+J)){P=s+J-P-J/2}}}O=Math.min(Math.max(O,t),r);P=Math.min(Math.max(P,u),s);L.scrollerTransition(R).scrollerTransform(O,P)}else{L.scrollerTransition(R).scrollerTransform(0,0)}}L.zoomerTransition(R).zoomerTransform(D)};L._cal=function(){K=L.wrapper.offsetWidth;J=L.wrapper.offsetHeight;z=L.zoomer.offsetWidth;o=L.zoomer.offsetHeight;var N=z*D;var M=o*D;t=Math.min((K/2-N/2),0);r=-t;u=Math.min((J/2-M/2),0);s=-u};var K,J,q,p,m,n,t,u,r,s,z,o,y={},x={},v,w,E,G,H,F,I;L.onTouchstart=function(M){h.preventDefault(M);q=true;y.x=M.type==="touchstart"?M.targetTouches[0].pageX:M.pageX;y.y=M.type==="touchstart"?M.targetTouches[0].pageY:M.pageY};L.onTouchMove=function(M){h.preventDefault(M);if(!q){return}if(!p){K=L.wrapper.offsetWidth;J=L.wrapper.offsetHeight;z=L.zoomer.offsetWidth;o=L.zoomer.offsetHeight;var P=h.parseTranslateMatrix(h.getStyles(L.scroller,"webkitTransform"));v=P.x||0;w=P.y||0;L.scrollerTransition(0)}var O=z*D;var N=o*D;if(O<K&&N<J){return}t=Math.min((K/2-O/2),0);r=-t;u=Math.min((J/2-N/2),0);s=-u;x.x=M.type===h.event.move?M.targetTouches[0].pageX:M.pageX;x.y=M.type===h.event.move?M.targetTouches[0].pageY:M.pageY;if(!p&&!B){if((Math.floor(t)===Math.floor(v)&&x.x<y.x)||(Math.floor(r)===Math.floor(v)&&x.x>y.x)){q=false;return}}p=true;m=x.x-y.x+v;n=x.y-y.y+w;if(m<t){m=t+1-Math.pow((t-m+1),0.8)}if(m>r){m=r-1+Math.pow((m-r+1),0.8)}if(n<u){n=u+1-Math.pow((u-n+1),0.8)}if(n>s){n=s-1+Math.pow((n-s+1),0.8)}if(!E){E=x.x}if(!F){F=x.y}if(!G){G=h.now()}H=(x.x-E)/(h.now()-G)/2;I=(x.y-F)/(h.now()-G)/2;if(Math.abs(x.x-E)<2){H=0}if(Math.abs(x.y-F)<2){I=0}E=x.x;F=x.y;G=h.now();L.scrollerTransform(m,n)};L.onTouchEnd=function(M){if(!M.touches||!M.touches.length){A=false}if(!q||!p){q=false;p=false;return}q=false;p=false;var Q=300;var R=300;var N=H*Q;var S=m+N;var O=I*R;var T=n+O;if(H!==0){Q=Math.abs((S-m)/H)}if(I!==0){R=Math.abs((T-n)/I)}var P=Math.max(Q,R);m=S;n=T;var V=z*D;var U=o*D;t=Math.min((K/2-V/2),0);r=-t;u=Math.min((J/2-U/2),0);s=-u;m=Math.max(Math.min(m,r),t);n=Math.max(Math.min(n,s),u);L.scrollerTransition(P).scrollerTransform(m,n)};L.destroy=function(){L.initEvents(true);delete h.data[L.wrapper.getAttribute("data-zoomer")];L.wrapper.setAttribute("data-zoomer","")};L.init();return L};a.Zoom.defaults={speed:300,maxZoom:3,minZoom:1,};a.fn.zoom=function(k){var l=[];this.each(function(){var o=null;var n=this;var m=n.getAttribute("data-zoomer");if(!m){m=h.guid();h.data[m]=o=new a.Zoom(n,k);n.setAttribute("data-zoomer",m)}else{o=h.data[m]}l.push(o)});return l.length===1?l[0]:l}})(window.jQuery,window.fui,document);(function(a,d,c){var e=null;var b={init:function(g){var f=a("#fui_imagePreview");if(f.length==0){f=a('<div id="fui_imagePreview"  class="f-imagePreview" ><div class="f-imagePreview-slider" ></div></div>');a("body").append(f);b.bindEvent(f)}f.addClass("f-imagePreview-in");f[0].dfop=g;f.show();setTimeout(function(){f.removeClass("f-imagePreview-in");f.find(".f-imagePreview-slider").slider({data:g.data,loop:true,indicator:true,gotonum:g.gotonum});var h=f.find("img");h.addClass("f-zoom");h.parent().addClass("f-zoom-scroller");h.parent().parent().addClass("f-zoom-wrapper").zoom();f.find("img").each(function(){var i=a(this)[0];i.addEventListener("doubletap",function(){e&&e.cancel();e=null})});f=null},500)},bindEvent:function(f){f.on("tap",function(h){var i=h.target||h.srcElement;var g=a(this);var j=g[0].dfop;if(j.taphold){g=null;j.taphold=false;return false}if(i.tagName!=="IMG"){b.close(g)}else{b.laterCloseEvent()}g=null});f.on("taphold",function(){var g=a(this);var i=g[0].dfop;var h="";if(g.find("img").length===1){h=g.find("img").attr("src")}else{h=g.find(".f-slider-item.f-active img").attr("src")}i.holdEvent&&i.holdEvent(h);i.taphold=true;g=null;return false})},close:function(f){e=null;f.addClass("f-imagePreview-out");setTimeout(function(){f.hide();f.removeClass("f-imagePreview-out");var g=f.find("img");var h=g.parent().parent().addClass("f-zoom-wrapper").zoom();a.each(h,function(i,j){j&&j.destroy&&j.destroy()});f.find(".f-imagePreview-slider").remove();f.append('<div class="f-imagePreview-slider" ></div>');g=null;f=null},500)},laterCloseEvent:function(){!e&&(e=d.later(function(){b.close(a("#fui_imagePreview"))},300))}};d.imagePreview=function(f){if(f==undefined||!f.data||f.data.length==0){return}b.init(f)};a.fn.imagePreviewClose=function(){b.close(a(this))}})(window.jQuery,window.fui,document);(function(a){a.fn.toptab=function(f,e){var b=a(this);f=f||[];if(f.length>0){b.addClass("f-toptab");var c=a('<div class="f-toptab-btns" ><div></div></div>');var d=a('<div class="f-toptab-content" ></div>');a.each(f,function(i,j){var g='<a class="f-toptab-btn'+(i==0?" f-active ":"")+'"  data-value="'+i+'"  href="#">'+j+"</a>";c.find("div").append(g);var h='<div class="f-toptab-content-item'+(i==0?" f-active ":"")+'" data-value="'+i+'" ></div>';d.append(h)});b.append(c);b.append(d);c[0].callback=e;c.find(".f-toptab-btn").on("tap",function(){var h=a(this);var i=h.parent().parent();var g=i.next();if(!h.hasClass("f-active")){i.find(".f-active").removeClass("f-active");h.addClass("f-active");g.find(".f-active").removeClass("f-active");var k=h.attr("data-value");g.find('[data-value="'+k+'"]').addClass("f-active");var j=i[0].callback;j&&j(k)}h=null;i=null;g=null});return d.find(".f-toptab-content-item")}return null}})(window.jQuery);(function(a){a.fn.ftimeline=function(f){var c=a(this);c.addClass("f-timeline");var e=a('<div class="f-timeline-allwrap"></div>');var d=a("<ul></ul>");var b=a('<li class="f-timeline-header"><div>当前</div></li>');d.append(b);a.each(f,function(j,k){var i=a('<li class="f-timeline-item" ><div class="f-timeline-wrap" ></div></li>');if(j==0){i.find("div").addClass("f-timeline-current")}var h=i.find(".f-timeline-wrap");var g=a('<div class="f-timeline-content"><span class="arrow"></span></div>');g.append('<div class="f-timeline-title">'+k.title+"</div>");g.append('<div class="f-timeline-body"><span>'+k.people+"</span>"+k.content+"</div>");h.append('<span class="f-timeline-date">'+k.time+"</span>");h.append(g);d.append(i)});d.append('<li class="f-timeline-ender"><div>开始</div></li>');e.html(d);c.html(e)}})(window.jQuery);(function(a,c){var b={init:function(d,g){var f='            <div class="f-popright" >                <div class="f-popright-content">                <div class="f-popright-title" ><div class="f-popright-btn-left">';if(g.cancelBtn){f+='<div class="f-popright-btn cancel" data-value="cancel" >'+g.cancelBtn+"</div>"}if(g.restBtn){f+='<div class="f-popright-btn rest" data-value="rest">'+g.restBtn+"</div>"}f+="</div>";if(g.okBtn){f+='<div class="f-popright-btn ok" data-value="ok">'+g.okBtn+"</div>"}f+='</div>                <div class="f-popright-body" ></div>            </div>        </div>';var e=a(f);d.parent().append(e);e.find(".f-popright-body").append(d);d.addClass("f-popright-bodyContent");e.find(".f-popright-body").scroll();b.bindEvent(e,g);d=null;e=null},bindEvent:function(d,e){d.on("tap",function(g){g=g||window.event;var h=g.target||g.srcElement;var f=a(h);if(f.hasClass("f-popright")){f.removeClass("active")}});d.find(".f-popright-btn").on("tap",{fop:e},function(h){var f=a(this);var i=f.attr("data-value");var g=h.data.fop;g.callBack&&g.callBack(i,f.parents(".f-popright").find(".f-popright-bodyContent"));if(i=="ok"||i=="cancel"){f.parents(".f-popright").removeClass("active")}});d=null}};a.fn.fpopright=function(f){var e={okBtn:"确定",restBtn:"重置",cancelBtn:"取消",callBack:false};var d=a(this);if(d[0].fop){return d}a.extend(e,f||{});d[0].fop=e;b.init(d,e);return d};a.fn.fpoprightShow=function(){var e=a(this);var d=e.parents(".f-popright");if(!d.hasClass("active")){d.addClass("active")}d=null;e=null};a.fn.fpoprightHide=function(){var e=a(this);var d=e.parents(".f-popright");if(d.hasClass("active")){d.removeClass("active")}d=null;e=null}})(window.jQuery,window.fui);(function(a){var v=false;var s=false;var c=false;var u=false;var w=false;var x=0;var l=0;var t=0;var j=false;var k=false;var n=false;var f="f-swipebtn-handler";var g="f-swipebtn-right";var d="f-swipebtn-btn";var h="f-swipebtn-transitioning";var e="f-swipebtn-selected";var p="."+f;var q="."+g;var o="."+d;var m=0.8;var y=function(){var z;if(x!==l){if(c&&c.length>0){n=x/t;if(x<-t){x=-t-Math.pow(-x-t,m)}for(var B=0,C=c.length;B<C;B++){var A=c[B];if(typeof A._buttonOffset==="undefined"){A._buttonOffset=A.offsetLeft}z=A._buttonOffset;r(A,(x-z*(1+Math.max(n,-1))))}}r(v,x);l=x}w=requestAnimationFrame(function(){y()})};var r=function(z,A){if(z&&z.style){z.style.webkitTransform="translate("+A+"px,0)"}};var i={handleEvent:function(z){switch(z.type){case"drag":this.drag(z);break;case"dragend":this.dragend(z);break;case"swiperight":this.swiperight(z);break;case"swipeleft":this.swipeleft(z);break}},drag:function(F){F=F||window.event;var E=F.target||F.srcElement;var B=null;var z=a(E);if(z.hasClass("f-swipebtn")){B=z[0]}else{B=z.parents(".f-swipebtn")[0]}z=null;if(!j){v=s=c=u=w=false;v=B.querySelector(p);if(v){s=B.querySelector(q);if(s){t=s.offsetWidth;c=s.querySelectorAll(o)}B.classList.remove(h);k=B.classList.contains(e)}}var C=F.detail;var D=C.direction;var A=C.angle;if(D==="left"&&(A>150||A<-150)){if(c){j=true}}else{if(D==="right"&&(A>-30&&A<30)){if((c&&k)){j=true}}}if(j){F.stopPropagation();F.detail.gesture.preventDefault();var G=F.detail.deltaX;if(k){G=G-t}if((G<0&&!c)){if(!k){return}G=0}if(G<0){u="toLeft"}else{if(G>0){u="toRight"}else{if(!u){u="toLeft"}}}if(!w){y()}x=G}},swipeleft:function(z){if(j){z.stopPropagation()}},swiperight:function(z){if(j){z.stopPropagation()}},dragend:function(J){if(!j){return}J=J||window.event;var I=J.target||J.srcElement;var G=null;var z=a(I);if(z.hasClass("f-swipebtn")){G=z[0]}else{G=z.parents(".f-swipebtn")[0]}z=null;J.stopPropagation();if(w){cancelAnimationFrame(w);w=null}var H=J.detail;j=false;var A="close";var B=u==="toLeft"?t:0;var L=H.swipe||(Math.abs(x)>B/2);if(L){if(!k){A="open"}else{if(H.direction==="left"){A="open"}}}G.classList.add(h);var F;if(A==="open"){var N=u==="toLeft"?-B:B;r(v,N);F=u==="toLeft"?c:"undefined";if(typeof F!=="undefined"){var C=null;for(var K=0;K<F.length;K++){C=F[K];r(C,N)}C.parentNode.classList.add(e);G.classList.add(e);if(!k){fui.trigger(G,u==="toLeft"?"slideleft":"slideright")}}}else{r(v,0);s&&s.classList.remove(e);G.classList.remove(e)}var D;if(c&&c.length>0&&c!==F){for(var K=0,M=c.length;K<M;K++){var E=c[K];D=E._buttonOffset;if(typeof D==="undefined"){E._buttonOffset=E.offsetLeft}r(E,-D)}}}};var b=function(z){var A=z[0];A.addEventListener("drag",i);A.addEventListener("dragend",i);A.addEventListener("swiperight",i);A.addEventListener("swipeleft",i)};a.fn.fswipebtn=function(){a(this).each(function(){b(a(this))})}})(window.jQuery);(function(a,c){var b={init:function(d,f){f.id=c.guid();var e='<div class="f-checkbox f-pop" id="pop_'+f.id+'"  data-page="'+c.pageid()+'"  >';e+='<div class="f-checkbox-header" >';e+='<div class="f-checkbox-cancel">取消</div>';e+='<div class="f-checkbox-ok">确定</div>';e+="</div>";e+='<div class="f-checkbox-body" >';f.dataMap={};a.each(f.data,function(g,h){f.dataMap[h[f.ivalue]]=h;e+='<div class="f-checkbox-item" data-value="'+h[f.ivalue]+'" >'+h[f.itext]+"</div>"});e+="</div></div>";a("body").append(e);c.createMask();b.bindEvent(d,f)},bindEvent:function(e,f){e.on("tap",function(){var h=a(this);if(h.attr("readonly")||h.parents(".lr-form-row").attr("readonly")){return false}var j=h[0];var i=j.fop;i.callback&&i.callback();var g=a("#pop_"+i.id);if(!g.hasClass("active")){g.addClass("active");c.showMask()}g.find(".selected").removeClass("selected");setTimeout(function(){if(i.value!=undefined&&i.value!=""&&i.value!=null){var k=i.value.split(",");a.each(k,function(l,m){g.find('[data-value="'+m+'"]').addClass("selected")})}g=null},300);return false});var d=a("#pop_"+f.id);d.find(".f-checkbox-body").scroll();d.find(".f-checkbox-body").on("tap",function(h){h=h||window.event;var i=h.target||h.srcElement;var g=a(i);if(g.hasClass("f-checkbox-item")){if(g.hasClass("selected")){g.removeClass("selected")}else{g.addClass("selected")}return false}});d.find(".f-checkbox-cancel").on("tap",function(){var g=a(this).parents(".f-checkbox");g.removeClass("active");c.hideMask();return false});d.find(".f-checkbox-ok").on("tap",{$self:e,fop:f},function(j){var g=a(this).parents(".f-checkbox");g.removeClass("active");c.hideMask();j=j||window.event;var k=j.data.fop;var h=j.data.$self;var l=[];var m=[];var i=[];g.find(".selected").each(function(){var o=a(this).attr("data-value");var n=k.dataMap[o];m.push(o);l.push(n[k.itext]);i.push(n)});if(k.value!=String(m)){k.value=String(m);k.text=String(l);h.trigger("change");if(!!k.change){k.change(k.value,k.text,i,h)}}g=null;h=null;return false});d=null}};a.fn.fcheckbox=function(f){var d=a(this);if(d.length===0){return d}if(d[0].fop){return d}var e={data:[],change:false,ivalue:"value",itext:"text"};a.extend(e,f||{});d[0].fop=e;b.init(d,e);return d};a.fn.fcheckboxSet=function(i){var d=a(this);if(d.length>0){var g=d[0].fop;if(i!=undefined&&i!=""&&i!=null){var j=i.split(",");var h=[];var f=[];var e=[];a.each(j,function(k,m){if(m){e.push(m);var l=g.dataMap[m];if(l){h.push(l[g.itext]||"");f.push(l)}}});g.value=String(e);g.text=String(h);d.trigger("change");if(!!g.change){g.change(g.value,g.text,f,d)}}}d=null};a.fn.fcheckboxSetData=function(f){var e=a(this);if(e.length>0){var g=e[0].fop;if(g){g.dataMap={};g.data=f||[];var d=a("#pop_"+g.id+" .f-scroll");d.html("");a.each(g.data,function(h,i){g.dataMap[i[g.ivalue]]=i;d.append('<div class="f-checkbox-item" data-value="'+i[g.ivalue]+'" >'+i[g.itext]+"</div>")});d=null}}e=null}})(window.jQuery,window.fui);